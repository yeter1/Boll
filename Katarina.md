assert(load(Base64Decode("bG9jYWwgdmVyc2lvbiA9ICIyLjE3MyINCg0KLS0gLyBIZXJvIE5hbWUgQ2hlY2sgLyAtLQ0KaWYgbXlIZXJvLmNoYXJOYW1lIH49ICJLYXRhcmluYSIgdGhlbiByZXR1cm4gZW5kDQotLSAvIEhlcm8gTmFtZSBDaGVjayAvIC0tDQpwcmludCgiPGI+PGZvbnQgY29sb3I9XCIjMDBGNUZGXCI+S2F0YXJpbmFfRWdlbWVuX0thdGFyaW5hX1RoZV9TaW5pc3Rlcl9CbGFkZTwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4gbG9hZGVkITwvZm9udD4iKQ0KCXByaW50KCI8Yj48Zm9udCBjb2xvcj1cIiMwMEY1RkZcIj5FbXJlIFlpbGRpcmltIG96ZWwgVmVyc2l5b24hIDwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4gVGVzZWtrdXIgRXQhPC9mb250PiIpDQoNCg0KLS0gLyBMb2FkaW5nIEZ1bmN0aW9uIC8gLS0NCmZ1bmN0aW9uIE9uTG9hZCgpDQoJLS0tPg0KCQlWYXJpYWJsZXMoKQ0KCQlLYXRhcmluYU1lbnUoKQ0KCS0tLTwNCmVuZA0KLS0gLyBMb2FkaW5nIEZ1bmN0aW9uIC8gLS0NCg0KLS0gLyBUaWNrIEZ1bmN0aW9uIC8gLS0NCmZ1bmN0aW9uIE9uVGljaygpDQoJLS0tPg0KCQlDaGVja3MoKQ0KCQlEYW1hZ2VDYWxjdWxhdGlvbigpDQoJCVVzZUNvbnN1bWFibGVzKCkNCg0KCQlpZiBUYXJnZXQgdGhlbg0KCQkJaWYgS2F0YXJpbmFNZW51LmhhcmFzcy53aGFyYXNzIGFuZCBub3QgU2tpbGxSLmNhc3RpbmdVbHQgdGhlbiBDYXN0VyhUYXJnZXQpIGVuZA0KCQkJaWYgS2F0YXJpbmFNZW51LmtpbGxzdGVhbC5JZ25pdGUgdGhlbiBBdXRvSWduaXRlKFRhcmdldCkgZW5kDQoJCWVuZA0KCQkNCgktLSBNZW51IFZhcmlhYmxlcyAtLQ0KCS0tLT4NCgkJQ29tYm9LZXkgPQkgS2F0YXJpbmFNZW51LmNvbWJvLmNvbWJvS2V5DQoJCUZhcm1pbmdLZXkgPSAgIEthdGFyaW5hTWVudS5mYXJtaW5nLmZhcm1LZXkNCgkJSGFyYXNzS2V5ID0JS2F0YXJpbmFNZW51LmhhcmFzcy5oYXJhc3NLZXkNCgkJQ2xlYXJLZXkgPQkgS2F0YXJpbmFNZW51LmNsZWFyLmNsZWFyS2V5DQoJCVdhcmRKdW1wS2V5ID0gIEthdGFyaW5hTWVudS5taXNjLndhcmRKdW1wS2V5DQoJLS0tPA0KCS0tIE1lbnUgVmFyaWFibGVzIC0tDQoJLS0tPg0KCQlpZiBDb21ib0tleSB0aGVuDQoJCQlGdWxsQ29tYm8oKQ0KCQllbmQNCgkJaWYgSGFyYXNzS2V5IHRoZW4NCgkJCUhhcmFzc0NvbWJvKCkNCgkJZW5kDQoJCWlmIEZhcm1pbmdLZXkgYW5kIG5vdCBDb21ib0tleSB0aGVuDQoJCQlGYXJtKCkNCgkJZW5kDQoJCWlmIENsZWFyS2V5IHRoZW4NCgkJCU1peGVkQ2xlYXIoKQ0KCQllbmQJDQoJCWlmIFdhcmRKdW1wS2V5IHRoZW4NCgkJCW1vdmVUb0N1cnNvcigpDQoJCQlsb2NhbCBXYXJkUG9zID0gR2V0RGlzdGFuY2VTcXIobW91c2VQb3MpIDw9IFNraWxsV2FyZC5yYW5nZSAqIFNraWxsV2FyZC5yYW5nZSBhbmQgbW91c2VQb3Mgb3IgZ2V0TW91c2VQb3MoKQ0KCQkJd2FyZEp1bXAoV2FyZFBvcy54LCBXYXJkUG9zLnopDQoJCWVuZA0KCQlpZiBLYXRhcmluYU1lbnUua2lsbHN0ZWFsLnNtYXJ0S1MgdGhlbg0KCQkJS2lsbFN0ZWFsKCkNCgkJZW5kDQoJCWlmIEthdGFyaW5hTWVudS5taXNjLkF1dG9MZXZlbFNraWxscyA9PSAxIHRoZW4NCgkJCWlmIG15SGVyby5sZXZlbCA9PSA2IG9yIG15SGVyby5sZXZlbCA9PSAxMSBvciBteUhlcm8ubGV2ZWwgPT0gMTYgdGhlbg0KCQkJCUxldmVsU3BlbGwoX1IpDQoJCQllbmQNCgkJZWxzZQ0KCQkJYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZVtLYXRhcmluYU1lbnUubWlzYy5BdXRvTGV2ZWxTa2lsbHMtMV0pDQoJCWVuZA0KCQlpZiBLYXRhcmluYU1lbnUubWlzYy5qdW1wQWxsaWVzIHRoZW4NCgkJCURhbmdlckNoZWNrKCkNCgkJZW5kDQoJLS0tPA0KZW5kDQotLSAvIFRpY2sgRnVuY3Rpb24gLyAtLQ0KDQotLSAvIFZhcmlhYmxlcyBGdW5jdGlvbiAvIC0tDQpmdW5jdGlvbiBWYXJpYWJsZXMoKQ0KCS0tLSBTa2lsbHMgVmFycyAtLQ0KCS0tLT4NCgkJU2tpbGxRID0Je3JhbmdlID0gNjc1LCBuYW1lID0gIkJvdW5jaW5nIEJsYWRlcyIsCXJlYWR5ID0gZmFsc2UsCWRlbGF5ID0gNDAwLAlwcm9qU3BlZWQgPSAxNDAwLAl0aW1lVG9IaXQgPSAwLAltYXJrRGVsYXkgPSA0MDAwLAljb2xvciA9IEFSR0IoMjU1LDE3OCwgMCAsIDAgKQl9DQoJCVNraWxsVyA9CXtyYW5nZSA9IDM3NSwgbmFtZSA9ICJTaW5pc3RlciBTdGVlbCIsCXJlYWR5ID0gZmFsc2UsCQkJCQkJCQkJCQkJCQkJCQkJCWNvbG9yID0gQVJHQigyNTUsIDMyLDE3OCwxNzApCX0NCgkJU2tpbGxFID0Je3JhbmdlID0gNzAwLCBuYW1lID0gIlNodW5wbyIsCQkJcmVhZHkgPSBmYWxzZSwJCQkJCQkJCQkJCQkJCQkJCQkJY29sb3IgPSBBUkdCKDI1NSwxMjgsIDAgLDEyOCkJfQ0KCQlTa2lsbFIgPQl7cmFuZ2UgPSA1NTAsIG5hbWUgPSAiRGVhdGggTG90dXMiLAkJcmVhZHkgPSBmYWxzZSwJCQkJCWNhc3RpbmdVbHQgPSBmYWxzZSwJCQkJCQkJCQkJCQkJCQkJCQl9DQoJCVNraWxsV2FyZCA9IHtyYW5nZSA9IDYwMCwgbGFzdEp1bXAgPSAwLAkJCQlpdGVtU2xvdCA9IG5pbAkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCX0NCgktLS08DQoJLS0tIFNraWxscyBWYXJzIC0tLQ0KCS0tLSBJdGVtcyBWYXJzIC0tLQ0KCS0tLT4NCgkJSXRlbXMgPQ0KCQl7DQoJCQkJCUhlYWx0aFBvdAkJPSB7cmVhZHkgPSBmYWxzZX0sDQoJCQkJCUZsYXNrUG90CQk9IHtyZWFkeSA9IGZhbHNlfSwNCgkJCQkJVHJpbmtldFdhcmQJCT0ge3JlYWR5ID0gZmFsc2V9LA0KCQkJCQlSdWJ5U2lnaHRTdG9uZQk9IHtyZWFkeSA9IGZhbHNlfSwNCgkJCQkJU2lnaHRTdG9uZQkJPSB7cmVhZHkgPSBmYWxzZX0sDQoJCQkJCVNpZ2h0V2FyZAkJPSB7cmVhZHkgPSBmYWxzZX0sDQoJCQkJCVZpc2lvbldhcmQJCT0ge3JlYWR5ID0gZmFsc2V9DQoJCX0NCgktLS08DQoJLS0tIEl0ZW1zIFZhcnMgLS0tDQoJLS0tIE9yYndhbGtpbmcgVmFycyAtLS0NCgktLS0+DQoJCXZQcmVkID0gVlByZWRpY3Rpb24oKQ0KDQoJCWtTT1cgPSBTT1codlByZWQpDQoJLS0tPA0KCS0tLSBPcmJ3YWxraW5nIFZhcnMgLS0tDQoJLS0tIFRpY2tNYW5hZ2VyIFZhcnMgLS0tDQoJLS0tPg0KCQlUTWFuYWdlciA9DQoJCXsNCgkJCW9uVGljawk9IFRpY2tNYW5hZ2VyKDIwKSwNCgkJCW9uRHJhdwk9IFRpY2tNYW5hZ2VyKDgwKSwNCgkJCW9uU3BlbGwJPSBUaWNrTWFuYWdlcigxNSkNCgkJfQ0KCS0tLTwNCgktLS0gVGlja01hbmFnZXIgVmFycyAtLS0NCglpZiBWSVBfVVNFUiB0aGVuDQoJCS0tLSBMRkMgVmFycyAtLS0NCgkJLS0tPg0KCQkJX0cub2xkRHJhd0NpcmNsZSA9IHJhd2dldChfRywgJ0RyYXdDaXJjbGUnKQ0KCQkJX0cuRHJhd0NpcmNsZSA9IERyYXdDaXJjbGUyDQoJCS0tLTwNCgkJLS0tIExGQyBWYXJzIC0tLQ0KCWVuZA0KCS0tLSBEcmF3aW5nIFZhcnMgLS0tDQoJLS0tPg0KCQlUZXh0TGlzdCA9IHsiSGFyYXNzIGhpbSIsICJRID0gS2lsbCIsICJXID0gS2lsbCIsICJFID0gS2lsbCEiLCAiUStXID0gS2lsbCIsICJRK0UgPSBLaWxsIiwgIkUrVyA9IEtpbGwiLCAiUStFK1cgPSBLaWxsIiwgIlErRStXK0l0bSA9IEtpbGwiLCAiUStXK0UrUjogIiwgIk5lZWQgQ0RzIn0NCgkJS2lsbFRleHQgPSB7fQ0KCQljb2xvclRleHQgPSBBUkdCKDI1NSwyNTUsMjA0LDApDQoJCXdhcmRDb2xvciA9DQoJCXsNCgkJCQkJYXZhaWxhYmxlCT0gQVJHQigyNTUsMjU1LDI1NSwyNTUpLA0KCQkJCQlzZWFyY2hpbmcJPSBBUkdCKDI1NSwyNTAsMTIzLCAyMCksDQoJCQkJCXVuYXZhaWxhYmxlCT0gQVJHQigyNTUsMjU1LCAwICwgMCApDQoJCX0NCgktLS08DQoJLS0tIERyYXdpbmcgVmFycyAtLS0NCgktLS0gTWlzYyBWYXJzIC0tLQ0KCS0tLT4NCgkJbGV2ZWxTZXF1ZW5jZSA9IHsNCgkJCXsgMSwzLDIsMSwxLDQsMSwyLDEsMiw0LDIsMiwzLDMsNCwzLDMgfSwgLS0gUHJpb3JpdGlzZSBRDQoJCQl7IDEsMywyLDIsMiw0LDIsMSwyLDEsNCwxLDEsMywzLDQsMywzIH0gIC0tIFByaW9yaXRpc2UgVw0KCQl9DQoJCVVzaW5nSFBvdCA9IGZhbHNlDQoJCWdhbWVTdGF0ZSA9IEdldEdhbWUoKQ0KCQlpZiBnYW1lU3RhdGUubWFwLnNob3J0TmFtZSA9PSAidHdpc3RlZFRyZWVsaW5lIiB0aGVuDQoJCQlUVE1BUCA9IHRydWUNCgkJZWxzZQ0KCQkJVFRNQVAgPSBmYWxzZQ0KCQllbmQNCgktLS08DQoJLS0tIE1pc2MgVmFycyAtLS0NCgktLS0gVGFibGVzIC0tLQ0KCS0tLT4NCgkJV2FyZHMgPSB7fQ0KCQlhbGx5SGVyb2VzID0gR2V0QWxseUhlcm9lcygpDQoJCWVuZW15SGVyb2VzID0gR2V0RW5lbXlIZXJvZXMoKQ0KCQllbmVteU1pbmlvbnMgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgU2tpbGxFLnJhbmdlLCBwbGF5ZXIsIE1JTklPTl9TT1JUX0hFQUxUSF9BU0MpDQoJCWFsbHlNaW5pb25zID0gbWluaW9uTWFuYWdlcihNSU5JT05fQUxMWSwgU2tpbGxFLnJhbmdlLCBwbGF5ZXIsIE1JTklPTl9TT1JUX0hFQUxUSF9BU0MpDQoJCUp1bmdsZU1vYnMgPSB7fQ0KCQlKdW5nbGVGb2N1c01vYnMgPSB7fQ0KCQlwcmlvcml0eVRhYmxlID0gew0KCQkJQVAgPSB7DQoJCQkJIkFubmllIiwgIkFocmkiLCAiQWthbGkiLCAiQW5pdmlhIiwgIkFubmllIiwgIkJyYW5kIiwgIkNhc3Npb3BlaWEiLCAiRGlhbmEiLCAiRXZlbHlubiIsICJGaWRkbGVTdGlja3MiLCAiRml6eiIsICJHcmFnYXMiLCAiSGVpbWVyZGluZ2VyIiwgIkthcnRodXMiLA0KCQkJCSJLYXNzYWRpbiIsICJLYXRhcmluYSIsICJLYXlsZSIsICJLZW5uZW4iLCAiTGVibGFuYyIsICJMaXNzYW5kcmEiLCAiTHV4IiwgIk1hbHphaGFyIiwgIk1vcmRla2Fpc2VyIiwgIk1vcmdhbmEiLCAiTmlkYWxlZSIsICJPcmlhbm5hIiwNCgkJCQkiUnl6ZSIsICJTaW9uIiwgIlN3YWluIiwgIlN5bmRyYSIsICJUZWVtbyIsICJUd2lzdGVkRmF0ZSIsICJWZWlnYXIiLCAiVmlrdG9yIiwgIlZsYWRpbWlyIiwgIlhlcmF0aCIsICJaaWdncyIsICJaeXJhIg0KCQkJfSwNCgkJCVN1cHBvcnQgPSB7DQoJCQkJIkFsaXN0YXIiLCAiQmxpdHpjcmFuayIsICJKYW5uYSIsICJLYXJtYSIsICJMZW9uYSIsICJMdWx1IiwgIk5hbWkiLCAiTnVudSIsICJTb25hIiwgIlNvcmFrYSIsICJUYXJpYyIsICJUaHJlc2giLCAiWmlsZWFuIg0KCQkJfSwNCgkJCVRhbmsgPSB7DQoJCQkJIkFtdW11IiwgIkNob2dhdGgiLCAiRHJNdW5kbyIsICJHYWxpbyIsICJIZWNhcmltIiwgIk1hbHBoaXRlIiwgIk1hb2thaSIsICJOYXN1cyIsICJSYW1tdXMiLCAiU2VqdWFuaSIsICJOYXV0aWx1cyIsICJTaGVuIiwgIlNpbmdlZCIsICJTa2FybmVyIiwgIlZvbGliZWFyIiwNCgkJCQkiV2Fyd2ljayIsICJZb3JpY2siLCAiWmFjIg0KCQkJfSwNCgkJCUFEX0NhcnJ5ID0gew0KCQkJCSJBc2hlIiwgIkNhaXRseW4iLCAiQ29ya2kiLCAiRHJhdmVuIiwgIkV6cmVhbCIsICJHcmF2ZXMiLCAiSmF5Y2UiLCAiSmlueCIsICJLb2dNYXciLCAiTHVjaWFuIiwgIk1hc3RlcllpIiwgIk1pc3NGb3J0dW5lIiwgIlBhbnRoZW9uIiwgIlF1aW5uIiwgIlNoYWNvIiwgIlNpdmlyIiwNCgkJCQkiVGFsb24iLCJUcnluZGFtZXJlIiwgIlRyaXN0YW5hIiwgIlR3aXRjaCIsICJVcmdvdCIsICJWYXJ1cyIsICJWYXluZSIsICJZYXN1byIsIlplZCINCgkJCX0sDQoJCQlCcnVpc2VyID0gew0KCQkJCSJBYXRyb3giLCAiRGFyaXVzIiwgIkVsaXNlIiwgIkZpb3JhIiwgIkdhbmdwbGFuayIsICJHYXJlbiIsICJJcmVsaWEiLCAiSmFydmFuSVYiLCAiSmF4IiwgIktoYXppeCIsICJMZWVTaW4iLCAiTm9jdHVybmUiLCAiT2xhZiIsICJQb3BweSIsDQoJCQkJIlJlbmVrdG9uIiwgIlJlbmdhciIsICJSaXZlbiIsICJSdW1ibGUiLCAiU2h5dmFuYSIsICJUcnVuZGxlIiwgIlVkeXIiLCAiVmkiLCAiTW9ua2V5S2luZyIsICJYaW5aaGFvIg0KCQkJfQ0KCQl9DQoJCWlmIFRUTUFQIHRoZW4gLS0NCgkJCUZvY3VzSnVuZ2xlTmFtZXMgPSB7DQoJCQkJWyJUVF9OV3JhaXRoMS4xLjEiXSA9IHRydWUsDQoJCQkJWyJUVF9OR29sZW0yLjEuMSJdID0gdHJ1ZSwNCgkJCQlbIlRUX05Xb2xmMy4xLjEiXSA9IHRydWUsDQoJCQkJWyJUVF9OV3JhaXRoNC4xLjEiXSA9IHRydWUsDQoJCQkJWyJUVF9OR29sZW01LjEuMSJdID0gdHJ1ZSwNCgkJCQlbIlRUX05Xb2xmNi4xLjEiXSA9IHRydWUsDQoJCQkJWyJUVF9TcGlkZXJib3NzOC4xLjEiXSA9IHRydWUNCgkJCX0JCQ0KCQkJSnVuZ2xlTW9iTmFtZXMgPSB7DQoJCQkJWyJUVF9OV3JhaXRoMjEuMS4yIl0gPSB0cnVlLA0KCQkJCVsiVFRfTldyYWl0aDIxLjEuMyJdID0gdHJ1ZSwNCgkJCQlbIlRUX05Hb2xlbTIyLjEuMiJdID0gdHJ1ZSwNCgkJCQlbIlRUX05Xb2xmMjMuMS4yIl0gPSB0cnVlLA0KCQkJCVsiVFRfTldvbGYyMy4xLjMiXSA9IHRydWUsDQoJCQkJWyJUVF9OV3JhaXRoMjQuMS4yIl0gPSB0cnVlLA0KCQkJCVsiVFRfTldyYWl0aDI0LjEuMyJdID0gdHJ1ZSwNCgkJCQlbIlRUX05Hb2xlbTI1LjEuMSJdID0gdHJ1ZSwNCgkJCQlbIlRUX05Xb2xmMjYuMS4yIl0gPSB0cnVlLA0KCQkJCVsiVFRfTldvbGYyNi4xLjMiXSA9IHRydWUNCgkJCX0NCgkJZWxzZSANCgkJCUp1bmdsZU1vYk5hbWVzID0geyANCgkJCQlbIldvbGY4LjEuMiJdID0gdHJ1ZSwNCgkJCQlbIldvbGY4LjEuMyJdID0gdHJ1ZSwNCgkJCQlbIllvdW5nTGl6YXJkNy4xLjIiXSA9IHRydWUsDQoJCQkJWyJZb3VuZ0xpemFyZDcuMS4zIl0gPSB0cnVlLA0KCQkJCVsiTGVzc2VyV3JhaXRoOS4xLjMiXSA9IHRydWUsDQoJCQkJWyJMZXNzZXJXcmFpdGg5LjEuMiJdID0gdHJ1ZSwNCgkJCQlbIkxlc3NlcldyYWl0aDkuMS40Il0gPSB0cnVlLA0KCQkJCVsiWW91bmdMaXphcmQxMC4xLjIiXSA9IHRydWUsDQoJCQkJWyJZb3VuZ0xpemFyZDEwLjEuMyJdID0gdHJ1ZSwNCgkJCQlbIlNtYWxsR29sZW0xMS4xLjEiXSA9IHRydWUsDQoJCQkJWyJXb2xmMi4xLjIiXSA9IHRydWUsDQoJCQkJWyJXb2xmMi4xLjMiXSA9IHRydWUsDQoJCQkJWyJZb3VuZ0xpemFyZDEuMS4yIl0gPSB0cnVlLA0KCQkJCVsiWW91bmdMaXphcmQxLjEuMyJdID0gdHJ1ZSwNCgkJCQlbIkxlc3NlcldyYWl0aDMuMS4zIl0gPSB0cnVlLA0KCQkJCVsiTGVzc2VyV3JhaXRoMy4xLjIiXSA9IHRydWUsDQoJCQkJWyJMZXNzZXJXcmFpdGgzLjEuNCJdID0gdHJ1ZSwNCgkJCQlbIllvdW5nTGl6YXJkNC4xLjIiXSA9IHRydWUsDQoJCQkJWyJZb3VuZ0xpemFyZDQuMS4zIl0gPSB0cnVlLA0KCQkJCVsiU21hbGxHb2xlbTUuMS4xIl0gPSB0cnVlDQoJCQl9DQoJCQlGb2N1c0p1bmdsZU5hbWVzID0gew0KCQkJCVsiRHJhZ29uNi4xLjEiXSA9IHRydWUsDQoJCQkJWyJXb3JtMTIuMS4xIl0gPSB0cnVlLA0KCQkJCVsiR2lhbnRXb2xmOC4xLjEiXSA9IHRydWUsDQoJCQkJWyJBbmNpZW50R29sZW03LjEuMSJdID0gdHJ1ZSwNCgkJCQlbIldyYWl0aDkuMS4xIl0gPSB0cnVlLA0KCQkJCVsiTGl6YXJkRWxkZXIxMC4xLjEiXSA9IHRydWUsDQoJCQkJWyJHb2xlbTExLjEuMiJdID0gdHJ1ZSwNCgkJCQlbIkdpYW50V29sZjIuMS4xIl0gPSB0cnVlLA0KCQkJCVsiQW5jaWVudEdvbGVtMS4xLjEiXSA9IHRydWUsDQogCQkJCVsiV3JhaXRoMy4xLjEiXSA9IHRydWUsDQoJCQkJWyJMaXphcmRFbGRlcjQuMS4xIl0gPSB0cnVlLA0KCQkJCVsiR29sZW01LjEuMiJdID0gdHJ1ZSwNCgkJCQlbIkdyZWF0V3JhaXRoMTMuMS4xIl0gPSB0cnVlLA0KCQkJCVsiR3JlYXRXcmFpdGgxNC4xLjEiXSA9IHRydWUNCgkJCX0NCgkJZW5kDQoJCWZvciBpID0gMCwgb2JqTWFuYWdlci5tYXhPYmplY3RzIGRvDQoJCQlsb2NhbCBvYmplY3QgPSBvYmpNYW5hZ2VyOmdldE9iamVjdChpKQ0KCQkJaWYgb2JqZWN0IGFuZCBvYmplY3QudmFsaWQgYW5kIG5vdCBvYmplY3QuZGVhZCB0aGVuDQoJCQkJaWYgRm9jdXNKdW5nbGVOYW1lc1tvYmplY3QubmFtZV0gdGhlbg0KCQkJCQlKdW5nbGVGb2N1c01vYnNbI0p1bmdsZUZvY3VzTW9icysxXSA9IG9iamVjdA0KCQkJCWVsc2VpZiBKdW5nbGVNb2JOYW1lc1tvYmplY3QubmFtZV0gdGhlbg0KCQkJCQlKdW5nbGVNb2JzWyNKdW5nbGVNb2JzKzFdID0gb2JqZWN0DQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJLS0tPA0KCS0tLSBUYWJsZXMgLS0tDQplbmQNCi0tIC8gVmFyaWFibGVzIEZ1bmN0aW9uIC8gLS0NCg0KLS0gLyBNZW51IEZ1bmN0aW9uIC8gLS0NCmZ1bmN0aW9uIEthdGFyaW5hTWVudSgpDQoJLS0tIE1haW4gTWVudSAtLS0NCgktLS0+DQoJCUthdGFyaW5hTWVudSA9IHNjcmlwdENvbmZpZygiS2F0YXJpbmEgLSBFZ2VtZW4iLCAiS2F0YXJpbmEiKQ0KCQktLS0+IENvbWJvIE1lbnUNCgkJS2F0YXJpbmFNZW51OmFkZFN1Yk1lbnUoIlsiIC4uIG15SGVyby5jaGFyTmFtZSAuLiAiIC0gQ29tYm8gU2V0dGluZ3NdIiwgImNvbWJvIikNCgkJCUthdGFyaW5hTWVudS5jb21ibzphZGRQYXJhbSgiY29tYm9LZXkiLCAiRnVsbCBDb21ibyBLZXkgKFNCVFcpIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIDMyKQ0KCQkJS2F0YXJpbmFNZW51LmNvbWJvOmFkZFBhcmFtKCJzdG9wVWx0IiwgIlN0b3AgIiAuLiBTa2lsbFIubmFtZSAuLiAiIChSKSBJZiBUYXJnZXQgQ2FuIERpZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQoJCQlLYXRhcmluYU1lbnUuY29tYm86YWRkUGFyYW0oImF1dG9FIiwgIkF1dG8gRSBpZiBub3QgaW4gIiAuLiBTa2lsbFIubmFtZSAuLiAiIChSKSBSYW5nZSB3aGlsZSBVbHQiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KCQkJS2F0YXJpbmFNZW51LmNvbWJvOmFkZFBhcmFtKCJkZXRvbmF0ZVEiLCAiVHJ5IHRvIFByb2MgIiAuLiBTa2lsbFEubmFtZSAuLiAiIChRKSBNYXJrIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCgkJCUthdGFyaW5hTWVudS5jb21ibzphZGRQYXJhbSgiY29tYm9JdGVtcyIsICJVc2UgSXRlbXMgd2l0aCBCdXJzdCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCUthdGFyaW5hTWVudS5jb21ibzpwZXJtYVNob3coImNvbWJvS2V5IikNCgkJLS0tPA0KCQktLS0+IEhhcmFzcyBNZW51DQoJCUthdGFyaW5hTWVudTphZGRTdWJNZW51KCJbIiAuLiBteUhlcm8uY2hhck5hbWUgLi4gIiAtIEhhcmFzcyBTZXR0aW5nc10iLCAiaGFyYXNzIikNCgkJCUthdGFyaW5hTWVudS5oYXJhc3M6YWRkUGFyYW0oImhhcmFzc0tleSIsICJIYXJhc3MgSG90a2V5IChDKSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBHZXRLZXkoJ0MnKSkNCgkJCUthdGFyaW5hTWVudS5oYXJhc3M6YWRkUGFyYW0oImhNb2RlIiwgIkhhcmFzcyBNb2RlIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHsgIlErRStXIiwgIlErVyIgfSkNCgkJCUthdGFyaW5hTWVudS5oYXJhc3M6YWRkUGFyYW0oImRldG9uYXRlUSIsICJQcm9jIFEgTWFyayIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCUthdGFyaW5hTWVudS5oYXJhc3M6YWRkUGFyYW0oIndoYXJhc3MiLCAiQWx3YXlzICIgLi4gU2tpbGxXLm5hbWUgLi4gIiAoVykiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlLYXRhcmluYU1lbnUuaGFyYXNzOnBlcm1hU2hvdygiaGFyYXNzS2V5IikNCgkJLS0tPA0KCQktLS0+IEZhcm1pbmcgTWVudQ0KCQlLYXRhcmluYU1lbnU6YWRkU3ViTWVudSgiWyIgLi4gbXlIZXJvLmNoYXJOYW1lIC4uICIgLSBGYXJtaW5nIFNldHRpbmdzXSIsICJmYXJtaW5nIikNCgkJCUthdGFyaW5hTWVudS5mYXJtaW5nOmFkZFBhcmFtKCJmYXJtS2V5IiwgIkZhcm1pbmcgT04vT2ZmIChaKSIsIFNDUklQVF9QQVJBTV9PTktFWVRPR0dMRSwgdHJ1ZSwgOTApDQoJCQlLYXRhcmluYU1lbnUuZmFybWluZzphZGRQYXJhbSgicUZhcm0iLCAiRmFybSB3aXRoICIgLi4gU2tpbGxRLm5hbWUgLi4gIiAoUSkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlLYXRhcmluYU1lbnUuZmFybWluZzphZGRQYXJhbSgid0Zhcm0iLCAiRmFybSB3aXRoICIgLi4gU2tpbGxXLm5hbWUgLi4gIiAoVykiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlLYXRhcmluYU1lbnUuZmFybWluZzphZGRQYXJhbSgiZUZhcm0iLCAiRmFybSB3aXRoICIgLi4gU2tpbGxFLm5hbWUgLi4gIiAoRSkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KCQkJS2F0YXJpbmFNZW51LmZhcm1pbmc6cGVybWFTaG93KCJmYXJtS2V5IikNCgkJLS0tPA0KCQktLS0+IENsZWFyIE1lbnUJCQ0KCQlLYXRhcmluYU1lbnU6YWRkU3ViTWVudSgiWyIgLi4gbXlIZXJvLmNoYXJOYW1lIC4uICIgLSBDbGVhciBTZXR0aW5nc10iLCAiY2xlYXIiKQ0KCQkJS2F0YXJpbmFNZW51LmNsZWFyOmFkZFBhcmFtKCJjbGVhcktleSIsICJKdW5nbGUvTGFuZSBDbGVhciBLZXkgKFYpIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIEdldEtleSgnVicpKQ0KCQkJS2F0YXJpbmFNZW51LmNsZWFyOmFkZFBhcmFtKCJKdW5nbGVGYXJtIiwgIlVzZSBTa2lsbHMgdG8gRmFybSBKdW5nbGUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlLYXRhcmluYU1lbnUuY2xlYXI6YWRkUGFyYW0oIkNsZWFyTGFuZSIsICJVc2UgU2tpbGxzIHRvIENsZWFyIExhbmUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlLYXRhcmluYU1lbnUuY2xlYXI6YWRkUGFyYW0oImNsZWFyUSIsICJDbGVhciB3aXRoICIgLi4gU2tpbGxRLm5hbWUgLi4gIiAoUSkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlLYXRhcmluYU1lbnUuY2xlYXI6YWRkUGFyYW0oImNsZWFyVyIsICJDbGVhciB3aXRoICIgLi4gU2tpbGxXLm5hbWUgLi4gIiAoVykiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlLYXRhcmluYU1lbnUuY2xlYXI6YWRkUGFyYW0oImNsZWFyRSIsICJDbGVhciB3aXRoICIgLi4gU2tpbGxFLm5hbWUgLi4gIiAoRSkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCS0tLTwNCgkJLS0tPiBLaWxsU3RlYWwgTWVudQ0KCQlLYXRhcmluYU1lbnU6YWRkU3ViTWVudSgiWyIgLi4gbXlIZXJvLmNoYXJOYW1lIC4uICIgLSBLaWxsU3RlYWwgU2V0dGluZ3NdIiwgImtpbGxzdGVhbCIpDQoJCQlLYXRhcmluYU1lbnUua2lsbHN0ZWFsOmFkZFBhcmFtKCJzbWFydEtTIiwgIlVzZSBTbWFydCBLaWxsIFN0ZWFsIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkJLS0gS2F0YXJpbmFNZW51LmtpbGxzdGVhbDphZGRQYXJhbSgid2FyZEtTIiwgIlVzZSBXYXJkcyB0byBLUyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCUthdGFyaW5hTWVudS5raWxsc3RlYWw6YWRkUGFyYW0oInVsdEtTIiwgIlVzZSAiIC4uIFNraWxsUi5uYW1lIC4uICIgKFIpIHRvIEtTIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkJS2F0YXJpbmFNZW51LmtpbGxzdGVhbDphZGRQYXJhbSgiaXRlbXNLUyIsICJVc2UgSXRlbXMgdG8gS1MiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlLYXRhcmluYU1lbnUua2lsbHN0ZWFsOmFkZFBhcmFtKCJJZ25pdGUiLCAiQXV0byBJZ25pdGUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlLYXRhcmluYU1lbnUua2lsbHN0ZWFsOnBlcm1hU2hvdygic21hcnRLUyIpDQoJCS0tLTwNCgkJLS0tPiBEcmF3aW5nIE1lbnUJCQkNCgkJS2F0YXJpbmFNZW51OmFkZFN1Yk1lbnUoIlsiIC4uIG15SGVyby5jaGFyTmFtZSAuLiAiIC0gRHJhd2luZyBTZXR0aW5nc10iLCAiZHJhd2luZyIpDQoJCQlpZiBWSVBfVVNFUiB0aGVuDQoJCQkJS2F0YXJpbmFNZW51LmRyYXdpbmc6YWRkU3ViTWVudSgiWyIgLi4gbXlIZXJvLmNoYXJOYW1lIC4uICIgLSBMRkMgU2V0dGluZ3NdIiwgImxmYyIpDQoJCQkJCUthdGFyaW5hTWVudS5kcmF3aW5nLmxmYzphZGRQYXJhbSgiTGFnRnJlZSIsICJBY3RpdmF0ZSBMYWcgRnJlZSBDaXJjbGVzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCgkJCQkJS2F0YXJpbmFNZW51LmRyYXdpbmcubGZjOmFkZFBhcmFtKCJDTCIsICJMZW5ndGggYmVmb3JlIFNuYXBwaW5nIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAzMDAsIDc1LCAyMDAwLCAwKQ0KCQkJCQlLYXRhcmluYU1lbnUuZHJhd2luZy5sZmM6YWRkUGFyYW0oIkNMaW5mbyIsICJIaWdoZXIgbGVuZ3RoID0gTG93ZXIgRlBTIERyb3BzIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKQ0KCQkJZW5kDQoJCQlLYXRhcmluYU1lbnUuZHJhd2luZzphZGRQYXJhbSgiZGlzYWJsZUFsbCIsICJEaXNhYmxlIEFsbCBSYW5nZXMgRHJhd2luZyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQoJCQlLYXRhcmluYU1lbnUuZHJhd2luZzphZGRQYXJhbSgiZHJhd1RleHQiLCAiRHJhdyBFbmVteSBUZXh0IiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkJS2F0YXJpbmFNZW51LmRyYXdpbmc6YWRkUGFyYW0oImRyYXdUYXJnZXRUZXh0IiwgIkRyYXcgV2hvIEknbSBUYXJnZXR0aW5nIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkJS2F0YXJpbmFNZW51LmRyYXdpbmc6YWRkUGFyYW0oImRyYXdRIiwgIkRyYXcgQm91bmNpbmcgQmxhZGVzIChRKSBSYW5nZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCUthdGFyaW5hTWVudS5kcmF3aW5nOmFkZFBhcmFtKCJkcmF3VyIsICJEcmF3IFNpbmlzdGVyIFN0ZWVsIChXKSBSYW5nZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQoJCQlLYXRhcmluYU1lbnUuZHJhd2luZzphZGRQYXJhbSgiZHJhd0UiLCAiRHJhdyBTaHVucG8gKEUpIFJhbmdlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCgkJLS0tPA0KCQktLS0+IE1pc2MgTWVudQkNCgkJS2F0YXJpbmFNZW51OmFkZFN1Yk1lbnUoIlsiIC4uIG15SGVyby5jaGFyTmFtZSAuLiAiIC0gTWlzYyBTZXR0aW5nc10iLCAibWlzYyIpDQoJCQlLYXRhcmluYU1lbnUubWlzYzphZGRQYXJhbSgid2FyZEp1bXBLZXkiLCAiV2FyZCBKdW1wIEhvdGtleSAoRykiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgNzEpDQoJCQlLYXRhcmluYU1lbnUubWlzYzphZGRQYXJhbSgianVtcEFsbGllcyIsICJKdW1wIFRvIEFsbGllcyBpZiBJbiBEYW5nZXIiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlLYXRhcmluYU1lbnUubWlzYzphZGRQYXJhbSgiWldJdGVtcyIsICJBdXRvIFpob255YXMvV29vZ2xldHMiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQlLYXRhcmluYU1lbnUubWlzYzphZGRQYXJhbSgiWldIZWFsdGgiLCAiTWluIEhlYWx0aCAlIGZvciBaaG9ueWFzL1dvb2dsZXRzIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxNSwgMCwgMTAwLCAtMSkNCgkJCUthdGFyaW5hTWVudS5taXNjOmFkZFBhcmFtKCJhSFAiLCAiQXV0byBIZWFsdGggUG90cyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJCUthdGFyaW5hTWVudS5taXNjOmFkZFBhcmFtKCJIUEhlYWx0aCIsICJNaW4gJSBmb3IgSGVhbHRoIFBvdHMiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDUwLCAwLCAxMDAsIC0xKQ0KCQkJS2F0YXJpbmFNZW51Lm1pc2M6YWRkUGFyYW0oInVUTSIsICJVc2UgVGljayBNYW5hZ2VyL0ZQUyBJbXByb3ZlciIsU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCgkJCUthdGFyaW5hTWVudS5taXNjOmFkZFBhcmFtKCJBdXRvTGV2ZWxTa2lsbHMiLCAiQXV0byBMZXZlbCBTa2lsbHMgKFJlcXVpcmVzIFJlbG9hZCkiLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgeyAiTm8iLCAiUHJpb3JpdGlzZSBRIiwgIlByaW9yaXRpc2UgVyIgIH0pDQoJCQlLYXRhcmluYU1lbnUubWlzYzpwZXJtYVNob3coIndhcmRKdW1wS2V5IikNCgkJLS0tPA0KCQktLS0+IE9yYndhbGtpbmcgTWVudQ0KCQlLYXRhcmluYU1lbnU6YWRkU3ViTWVudSgiWyIgLi4gbXlIZXJvLmNoYXJOYW1lIC4uICJdIC0gT3Jid2Fsa2luZyBTZXR0aW5ncyIsICJPcmJ3YWxraW5nIikNCgkJCWtTT1c6TG9hZFRvTWVudShLYXRhcmluYU1lbnUuT3Jid2Fsa2luZykNCgkJLS0tPA0KCQktLS0+IFZlcnNpb24gSW5mbw0KCQlLYXRhcmluYU1lbnU6YWRkUGFyYW0oImthdGFWZXIiLCAiVmVyc2lvbjogIiwgU0NSSVBUX1BBUkFNX0lORk8sIHZlcnNpb24pDQoJCS0tLTwNCgkJLS0tPiBUYXJnZXQgU2VsZWN0b3IJCQ0KCQkJVGFyZ2V0U2VsZWN0b3IgPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNULCBTa2lsbEUucmFuZ2UsIERBTUFHRV9NQUdJQywgdHJ1ZSkNCgkJCVRhcmdldFNlbGVjdG9yLm5hbWUgPSAiS2F0YXJpbmEiDQoJCQlLYXRhcmluYU1lbnU6YWRkVFMoVGFyZ2V0U2VsZWN0b3IpDQoJCS0tLTwNCgkJLS0tPiBBcnJhbmdlIFByaW9yaXRpZXMNCgkJCWlmIGhlcm9NYW5hZ2VyLmlDb3VudCA8IDEwIHRoZW4gLS0gYm9ycm93ZWQgZnJvbSBTaWRhcyBBdXRvIENhcnJ5LCBtb2RpZmllZCB0byAzdjMNCgkgICAJCQlzY3JpcHRfTWVzc2FnZXIoIi4uLiIpDQoJCQllbHNlaWYgaGVyb01hbmFnZXIuaUNvdW50ID09IDYgYW5kIFRUTUFQIHRoZW4NCgkJCQlBcnJhbmdlVFRQcmlvcml0aWVzKCkNCgkJCWVsc2UNCgkJCQlBcnJhbmdlUHJpb3JpdGllcygpDQoJCQllbmQNCgkJLS0tPA0KCS0tLTwNCgktLS0gTWFpbiBNZW51IC0tLQ0KZW5kDQotLSAvIE1lbnUgRnVuY3Rpb24gLyAtLQ0KDQotLSAvIEZ1bGwgQ29tYm8gRnVuY3Rpb24gLyAtLQ0KZnVuY3Rpb24gRnVsbENvbWJvKCkNCgktLS0gQ29tYm8gV2hpbGUgTm90IENoYW5uZWxpbmcgLS0NCgktLS0+DQoJCWlmIG5vdCBTa2lsbFIuY2FzdGluZ1VsdCB0aGVuDQoJCQlpZiBWYWxpZFRhcmdldChUYXJnZXQpIGFuZCBUYXJnZXQgfj0gbmlsIHRoZW4NCgkJCQlpZiBLYXRhcmluYU1lbnUuY29tYm8uY29tYm9JdGVtcyB0aGVuDQoJCQkJCVVzZUl0ZW1zKFRhcmdldCkNCgkJCQllbmQNCgkJCQlDYXN0UShUYXJnZXQpDQoJCQkJaWYgS2F0YXJpbmFNZW51LmNvbWJvLmRldG9uYXRlUSBhbmQgR2V0VGlja0NvdW50KCkgPj0gU2tpbGxRLnRpbWVUb0hpdCB0aGVuDQoJCQkJCWlmIG5vdCBTa2lsbFEucmVhZHkgdGhlbiBDYXN0RShUYXJnZXQpIGVuZA0KCQkJCQlpZiBub3QgU2tpbGxFLnJlYWR5IHRoZW4gQ2FzdFcoVGFyZ2V0KSBlbmQNCgkJCQllbHNlaWYgbm90IEthdGFyaW5hTWVudS5jb21iby5kZXRvbmF0ZVEgdGhlbg0KCQkJCQlDYXN0RShUYXJnZXQpDQoJCQkJCUNhc3RXKFRhcmdldCkNCgkJCQllbmQNCgkJCQlDYXN0UigpDQoJCQllbmQNCgkJZW5kDQoJLS0tPA0KCS0tLSBDb21ibyBXaGlsZSBOb3QgQ2hhbm5lbGluZyAtLQ0KZW5kDQotLSAvIEZ1bGwgQ29tYm8gRnVuY3Rpb24gLyAtLQ0KDQotLSAvIEhhcmFzcyBDb21ibyBGdW5jdGlvbiAvIC0tDQpmdW5jdGlvbiBIYXJhc3NDb21ibygpDQoJLS0tIFNtYXJ0IEhhcmFzcyAtLQ0KCS0tLT4NCgkJaWYgVmFsaWRUYXJnZXQoVGFyZ2V0KSBhbmQgVGFyZ2V0IH49IG5pbCB0aGVuDQoJCQktLS0gSGFyYXNzIE1vZGUgMSBRK1crRSAtLS0NCgkJCWlmIEthdGFyaW5hTWVudS5oYXJhc3MuaE1vZGUgPT0gMSB0aGVuDQoJCQkJQ2FzdFEoVGFyZ2V0KQ0KCQkJCWlmIEthdGFyaW5hTWVudS5oYXJhc3MuZGV0b25hdGVRIGFuZCBHZXRUaWNrQ291bnQoKSA+PSBTa2lsbFEudGltZVRvSGl0IHRoZW4NCgkJCQkJaWYgbm90IFNraWxsUS5yZWFkeSB0aGVuIENhc3RFKFRhcmdldCkgZW5kDQoJCQkJCWlmIG5vdCBTa2lsbEUucmVhZHkgdGhlbiBDYXN0VyhUYXJnZXQpIGVuZA0KCQkJCWVsc2VpZiBub3QgS2F0YXJpbmFNZW51LmhhcmFzcy5kZXRvbmF0ZVEgdGhlbg0KCQkJCQlDYXN0RShUYXJnZXQpDQoJCQkJCUNhc3RXKFRhcmdldCkNCgkJCQllbmQNCgkJCWVuZA0KCQkJLS0tIEhhcmFzcyBNb2RlIDEgLS0tDQoJCQktLS0gSGFyYXNzIE1vZGUgMiBRK1cgLS0tDQoJCQlpZiBLYXRhcmluYU1lbnUuaGFyYXNzLmhNb2RlID09IDIgdGhlbg0KCQkJCUNhc3RRKFRhcmdldCkNCgkJCQlDYXN0VyhUYXJnZXQpDQoJCQllbmQNCgkJCS0tLSBIYXJhc3MgTW9kZSAyIC0tLQ0KCQllbmQNCgktLS08DQoJLS0tIFNtYXJ0IEhhcmFzcyAtLS0NCmVuZA0KLS0gLyBIYXJhc3MgQ29tYm8gRnVuY3Rpb24gLyAtLQ0KDQotLSAvIEZhcm0gRnVuY3Rpb24gLyAtLQ0KZnVuY3Rpb24gRmFybSgpDQoJLS0tPg0KCQlmb3IgXywgbWluaW9uIGluIHBhaXJzKGVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KCQkJLS0tIE1pbmlvbiBEYW1hZ2VzIC0tLQ0KCQkJbG9jYWwgcE1pbmlvbkRtZyA9IGdldERtZygiUSIsIG1pbmlvbiwgbXlIZXJvLCAyKQ0KCQkJbG9jYWwgcU1pbmlvbkRtZyA9IGdldERtZygiUSIsIG1pbmlvbiwgbXlIZXJvKQ0KCQkJbG9jYWwgd01pbmlvbkRtZyA9IGdldERtZygiVyIsIG1pbmlvbiwgbXlIZXJvKQ0KCQkJbG9jYWwgZU1pbmlvbkRtZyA9IGdldERtZygiRSIsIG1pbmlvbiwgbXlIZXJvKQ0KCQkJLS0tIE1pbmlvbiBEYW1hZ2VzIC0tLQ0KCQkJLS0tIE1pbmlvbiBLZXlzIC0tLQ0KCQkJbG9jYWwgcUZhcm1LZXkgPSBLYXRhcmluYU1lbnUuZmFybWluZy5xRmFybQ0KCQkJbG9jYWwgd0Zhcm1LZXkgPSBLYXRhcmluYU1lbnUuZmFybWluZy53RmFybQ0KCQkJbG9jYWwgZUZhcm1LZXkgPSBLYXRhcmluYU1lbnUuZmFybWluZy5lRmFybQ0KCQkJLS0tIE1pbmlvbiBLZXlzIC0tLQ0KCQkJLS0tIEZhcm1pbmcgTWluaW9ucyAtLS0NCgkJCWlmIFZhbGlkVGFyZ2V0KG1pbmlvbikgYW5kIG1pbmlvbiB+PSBuaWwgdGhlbg0KCQkJCWlmIEdldERpc3RhbmNlU3FyKG1pbmlvbikgPD0gU2tpbGxXLnJhbmdlKlNraWxsVy5yYW5nZSB0aGVuDQoJCQkJCWlmIHFGYXJtS2V5IGFuZCB3RmFybUtleSB0aGVuDQoJCQkJCQlpZiBTa2lsbFEucmVhZHkgYW5kIFNraWxsVy5yZWFkeSB0aGVuDQoJCQkJCQkJaWYgbWluaW9uLmhlYWx0aCA8PSAocE1pbmlvbkRtZyArIHFNaW5pb25EbWcgKyB3TWluaW9uRG1nKSBhbmQgbWluaW9uLmhlYWx0aCA+IHdNaW5pb25EbWcgdGhlbg0KCQkJCQkJCQlDYXN0UShtaW5pb24pDQoJCQkJCQkJCUNhc3RTcGVsbChfVykNCgkJCQkJCQllbmQNCgkJCQkJCWVsc2VpZiBTa2lsbFcucmVhZHkgdGhlbg0KCQkJCQkJCWlmIG1pbmlvbi5oZWFsdGggPD0gKHdNaW5pb25EbWcpIHRoZW4NCgkJCQkJCQkJQ2FzdFNwZWxsKF9XKQ0KCQkJCQkJCWVuZA0KCQkJCQkJZWxzZWlmIFNraWxsUS5yZWFkeSBhbmQgbm90IFNraWxsVy5yZWFkeSB0aGVuDQoJCQkJCQkJaWYgbWluaW9uLmhlYWx0aCA8PSAocU1pbmlvbkRtZykgdGhlbg0KCQkJCQkJCQlDYXN0UShtaW5pb24pDQoJCQkJCQkJZW5kDQoJCQkJCQllbmQNCgkJCQkJZWxzZWlmIHFGYXJtS2V5IGFuZCBub3Qgd0Zhcm1LZXkgdGhlbg0KCQkJCQkJaWYgU2tpbGxRLnJlYWR5IHRoZW4NCgkJCQkJCQlpZiBtaW5pb24uaGVhbHRoIDw9IChxTWluaW9uRG1nKSB0aGVuDQoJCQkJCQkJCUNhc3RRKG1pbmlvbikNCgkJCQkJCQllbmQNCgkJCQkJCWVuZA0KCQkJCQllbHNlaWYgbm90IHFGYXJtS2V5IGFuZCB3RmFybUtleSB0aGVuDQoJCQkJCQlpZiBTa2lsbFcucmVhZHkgdGhlbg0KCQkJCQkJCWlmIG1pbmlvbi5oZWFsdGggPD0gKHdNaW5pb25EbWcpIHRoZW4NCgkJCQkJCQkJQ2FzdFNwZWxsKF9XKQ0KCQkJCQkJCWVuZA0KCQkJCQkJZW5kDQoJCQkJCWVuZA0KCQkJCWVsc2VpZiAoR2V0RGlzdGFuY2VTcXIobWluaW9uKSA+IFNraWxsVy5yYW5nZSpTa2lsbFcucmFuZ2UpIHRoZW4NCgkJCQkJaWYgcUZhcm1LZXkgdGhlbg0KCQkJCQkJaWYgbWluaW9uLmhlYWx0aCA8PSBxTWluaW9uRG1nIGFuZCAoR2V0RGlzdGFuY2VTcXIobWluaW9uKSA8PSBTa2lsbFEucmFuZ2UqU2tpbGxRLnJhbmdlKSB0aGVuDQoJCQkJCQkJQ2FzdFEobWluaW9uKQ0KCQkJCQkJZW5kDQoJCQkJCWVuZA0KCQkJCQlpZiBlRmFybUtleSB0aGVuDQoJCQkJCQlpZiBtaW5pb24uaGVhbHRoIDw9IGVNaW5pb25EbWcgYW5kIChHZXREaXN0YW5jZVNxcihtaW5pb24pIDw9IFNraWxsRS5yYW5nZSpTa2lsbEUucmFuZ2UpIHRoZW4NCgkJCQkJCQlDYXN0RShtaW5pb24pDQoJCQkJCQllbmQNCgkJCQkJZW5kDQoJCQkJZW5kDQoJCQllbmQNCgkJCWJyZWFrDQoJCWVuZA0KCQktLS0gRmFybWluZyBNaW5pb25zIC0tLQ0KCS0tLTwNCmVuZA0KLS0gLyBGYXJtIEZ1bmN0aW9uIC8gLS0NCg0KLS0gLyBDbGVhciBGdW5jdGlvbiAvIC0tDQpmdW5jdGlvbiBNaXhlZENsZWFyKCkNCgktLS0gSnVuZ2xlIENsZWFyIC0tLQ0KCS0tLT4NCgkJaWYgS2F0YXJpbmFNZW51LmNsZWFyLkp1bmdsZUZhcm0gdGhlbg0KCQkJbG9jYWwgSnVuZ2xlTW9iID0gR2V0SnVuZ2xlTW9iKCkNCgkJCWlmIEp1bmdsZU1vYiB+PSBuaWwgdGhlbg0KCQkJCWlmIEthdGFyaW5hTWVudS5jbGVhci5jbGVhclEgYW5kIFNraWxsUS5yZWFkeSBhbmQgR2V0RGlzdGFuY2VTcXIoSnVuZ2xlTW9iKSA8PSBTa2lsbFEucmFuZ2UqU2tpbGxRLnJhbmdlIHRoZW4NCgkJCQkJQ2FzdFEoSnVuZ2xlTW9iKQ0KCQkJCWVuZA0KCQkJCWlmIEthdGFyaW5hTWVudS5jbGVhci5jbGVhclcgYW5kIFNraWxsVy5yZWFkeSBhbmQgR2V0RGlzdGFuY2VTcXIoSnVuZ2xlTW9iKSA8PSBTa2lsbFcucmFuZ2UqU2tpbGxXLnJhbmdlIHRoZW4NCgkJCQkJQ2FzdFNwZWxsKF9XKQ0KCQkJCWVuZA0KCQkJCWlmIEthdGFyaW5hTWVudS5jbGVhci5jbGVhckUgYW5kIFNraWxsRS5yZWFkeSBhbmQgR2V0RGlzdGFuY2VTcXIoSnVuZ2xlTW9iKSA8PSBTa2lsbEUucmFuZ2UqU2tpbGxFLnJhbmdlIHRoZW4NCgkJCQkJQ2FzdEUoSnVuZ2xlTW9iKQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCS0tLTwNCgktLS0gSnVuZ2xlIENsZWFyIC0tLQ0KCS0tLSBMYW5lIENsZWFyIC0tLQ0KCS0tLT4NCgkJaWYgS2F0YXJpbmFNZW51LmNsZWFyLkNsZWFyTGFuZSB0aGVuDQoJCQlmb3IgXywgbWluaW9uIGluIHBhaXJzKGVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KCQkJCWlmICBWYWxpZFRhcmdldChtaW5pb24pIGFuZCBtaW5pb24gfj0gbmlsIHRoZW4NCgkJCQkJaWYgS2F0YXJpbmFNZW51LmNsZWFyLmNsZWFyUSBhbmQgU2tpbGxRLnJlYWR5IGFuZCBHZXREaXN0YW5jZVNxcihtaW5pb24pIDw9IFNraWxsUS5yYW5nZSpTa2lsbFEucmFuZ2UgdGhlbg0KCQkJCQkJQ2FzdFEobWluaW9uKQ0KCQkJCQllbmQNCgkJCQkJaWYgS2F0YXJpbmFNZW51LmNsZWFyLmNsZWFyVyBhbmQgU2tpbGxXLnJlYWR5IGFuZCBHZXREaXN0YW5jZVNxcihtaW5pb24pIDw9IFNraWxsVy5yYW5nZSpTa2lsbFcucmFuZ2UgdGhlbg0KCQkJCQkJQ2FzdFNwZWxsKF9XKQ0KCQkJCQllbmQNCgkJCQkJaWYgS2F0YXJpbmFNZW51LmNsZWFyLmNsZWFyRSBhbmQgU2tpbGxFLnJlYWR5IGFuZCBHZXREaXN0YW5jZVNxcihtaW5pb24pIDw9IFNraWxsRS5yYW5nZSpTa2lsbEUucmFuZ2UgdGhlbiANCgkJCQkJCUNhc3RFKG1pbmlvbikNCgkJCQkJZW5kDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJLS0tPA0KCS0tLSBMYW5lIENsZWFyIC0tLQ0KZW5kDQotLSAvIENsZWFyIEZ1bmN0aW9uIC8gLS0NCg0KLS0gLyBDYXN0aW5nIFEgRnVuY3Rpb24gLyAtLQ0KZnVuY3Rpb24gQ2FzdFEoZW5lbXkpDQoJLS0tIER5bmFtaWMgUSBDYXN0IC0tLQ0KCS0tLT4NCgkJaWYgbm90IFNraWxsUS5yZWFkeSBvciAoR2V0RGlzdGFuY2VTcXIoZW5lbXkpID4gU2tpbGxRLnJhbmdlKlNraWxsUS5yYW5nZSkgdGhlbg0KCQkJcmV0dXJuIGZhbHNlDQoJCWVuZA0KCQlpZiBWYWxpZFRhcmdldChlbmVteSkgYW5kIGVuZW15IH49IG5pbCB0aGVuIA0KCQkJaWYgVklQX1VTRVIgdGhlbg0KCQkJCVBhY2tldCgiU19DQVNUIiwge3NwZWxsSWQgPSBfUSwgdGFyZ2V0TmV0d29ya0lkID0gZW5lbXkubmV0d29ya0lEfSk6c2VuZCgpDQoJCQkJcmV0dXJuIHRydWUNCgkJCWVsc2UNCgkJCQlDYXN0U3BlbGwoX1EsIGVuZW15KQ0KCQkJCXJldHVybiB0cnVlDQoJCQllbmQNCgkJCWlmIFNraWxsUS50aW1lVG9IaXQgPT0gMCBvciBHZXRUaWNrQ291bnQoKSA+PSBTa2lsbFEudGltZVRvSGl0IHRoZW4NCgkJCQlTa2lsbFEudGltZVRvSGl0ID0gR2V0VGlja0NvdW50KCkgKyAoU2tpbGxRLmRlbGF5ICsgKEdldERpc3RhbmNlKG15SGVybywgZW5lbXkpIC8gU2tpbGxRLnByb2pTcGVlZCkpDQoJCQkJcmV0dXJuIHRydWUNCgkJCWVuZA0KCQllbmQNCgkJcmV0dXJuIGZhbHNlDQoJLS0tPA0KCS0tLSBEeW5hbWljIFEgQ2FzdCAtLS0NCmVuZA0KLS0gLyBDYXN0aW5nIFEgRnVuY3Rpb24gLyAtLQ0KDQotLSAvIENhc3RpbmcgRSBGdW5jdGlvbiAvIC0tDQpmdW5jdGlvbiBDYXN0RShlbmVteSkNCgktLS0gRHluYW1pYyBFIENhc3QgLS0tDQoJLS0tPg0KCQlpZiBub3QgU2tpbGxFLnJlYWR5IG9yIChHZXREaXN0YW5jZVNxcihlbmVteSkgPiBTa2lsbEUucmFuZ2UqU2tpbGxFLnJhbmdlKSB0aGVuDQoJCQlyZXR1cm4gZmFsc2UNCgkJZW5kDQoJCWlmIFZhbGlkVGFyZ2V0KGVuZW15KSBhbmQgZW5lbXkgfj0gbmlsIHRoZW4gDQoJCQlpZiBWSVBfVVNFUiB0aGVuDQoJCQkJUGFja2V0KCJTX0NBU1QiLCB7c3BlbGxJZCA9IF9FLCB0YXJnZXROZXR3b3JrSWQgPSBlbmVteS5uZXR3b3JrSUR9KTpzZW5kKCkNCgkJCQlyZXR1cm4gdHJ1ZQ0KCQkJZWxzZQ0KCQkJCUNhc3RTcGVsbChfRSwgZW5lbXkpDQoJCQkJcmV0dXJuIHRydWUNCgkJCWVuZA0KCQllbmQNCgkJcmV0dXJuIGZhbHNlDQoJLS0tPA0KCS0tLSBEeW5hbWljIEUgQ2FzdCAtLS0NCmVuZA0KLS0gLyBDYXN0aW5nIEUgRnVuY3Rpb24gLyAtLQ0KDQotLSAvIENhc3RpbmcgVyBGdW5jdGlvbiAvIC0tDQpmdW5jdGlvbiBDYXN0VyhlbmVteSkNCgktLS0gRHluYW1pYyBXIENhc3QgLS0tDQoJLS0tPg0KCQlpZiBub3QgU2tpbGxXLnJlYWR5IG9yIChHZXREaXN0YW5jZVNxcihlbmVteSkgPiBTa2lsbFcucmFuZ2UqU2tpbGxXLnJhbmdlKSB0aGVuDQoJCQlyZXR1cm4gZmFsc2UNCgkJZW5kDQoJCWlmIFZhbGlkVGFyZ2V0KGVuZW15KSBhbmQgZW5lbXkgfj0gbmlsIHRoZW4NCgkJCUNhc3RTcGVsbChfVykNCgkJCXJldHVybiB0cnVlDQoJCWVuZA0KCQlyZXR1cm4gZmFsc2UNCgktLS08DQoJLS0tIER5bmFtaWMgVyBDYXN0IC0tLQ0KZW5kDQotLSAvIENhc3RpbmcgVyBGdW5jdGlvbiAvIC0tDQoNCi0tIC8gQ2FzdGluZyBSIEZ1bmN0aW9uIC8gLS0NCmZ1bmN0aW9uIENhc3RSKCkNCgktLS0gRHluYW1pYyBSIENhc3QgLS0tDQoJLS0tPg0KCQlpZiAoU2tpbGxRLnJlYWR5IG9yIFNraWxsVy5yZWFkeSBvciBTa2lsbEUucmVhZHkgb3IgU2tpbGxSLmNhc3RpbmdVbHQpIG9yIG5vdCBTa2lsbFIucmVhZHkgdGhlbg0KCQkJcmV0dXJuIGZhbHNlDQoJCWVuZA0KCQlpZiBDb3VudEVuZW15SGVyb0luUmFuZ2UoU2tpbGxSLnJhbmdlKSA+PSAxIHRoZW4NCgkJCUNhc3RTcGVsbChfUikNCgkJCVNraWxsUi5jYXN0aW5nVWx0ID0gdHJ1ZQ0KCQllbmQNCgktLS08DQoJLS0tIER5bWFuaWMgUiBDYXN0IC0tDQplbmQNCi0tIC8gQ2FzdGluZyBSIEZ1bmN0aW9uIC8gLS0NCg0KLS0gLyBXYXJkIEp1bXBpbmcgRnVuY3Rpb24gLyAtLQ0KZnVuY3Rpb24gd2FyZEp1bXAoeCwgeSkNCgktLS0+DQoJCWlmIFNraWxsRS5yZWFkeSB0aGVuDQoJCQlsb2NhbCBKdW1wZWQgPSBmYWxzZQ0KCQkJbG9jYWwgV2FyZERpc3RhbmNlID0gMzAwDQoJCQlmb3IgXywgYWxseSBpbiBwYWlycyhhbGx5SGVyb2VzKSBkbw0KCQkJCWlmIFZhbGlkVGFyZ2V0KGFsbHksIFNraWxsRS5yYW5nZSwgZmFsc2UpIGFuZCBhbGx5IH49IG5pbCB0aGVuDQoJCQkJCWlmIEdldERpc3RhbmNlU3FyKGFsbHksIG1vdXNlUG9zKSA8PSBXYXJkRGlzdGFuY2UqV2FyZERpc3RhbmNlIHRoZW4NCgkJCQkJCUNhc3RTcGVsbChfRSwgYWxseSkNCgkJCQkJCUp1bXBlZCA9IHRydWUNCgkJCQkJCVNraWxsV2FyZC5sYXN0SnVtcCA9IEdldFRpY2tDb3VudCgpICsgMjAwMA0KCQkJCQllbmQNCgkJCQllbmQNCgkJCWVuZA0KCQkJZm9yIF8sIG1pbmlvbiBpbiBwYWlycyhhbGx5TWluaW9ucy5vYmplY3RzKSBkbw0KCQkJCWlmIFZhbGlkVGFyZ2V0KG1pbmlvbiwgU2tpbGxFLnJhbmdlLCBmYWxzZSkgYW5kIG1pbmlvbiB+PSBuaWwgdGhlbg0KCQkJCQlpZiBHZXREaXN0YW5jZVNxcihtaW5pb24sIG1vdXNlUG9zKSA8PSBXYXJkRGlzdGFuY2UqV2FyZERpc3RhbmNlIHRoZW4NCgkJCQkJCUNhc3RTcGVsbChfRSwgbWluaW9uKQ0KCQkJCQkJSnVtcGVkID0gdHJ1ZQ0KCQkJCQkJU2tpbGxXYXJkLmxhc3RKdW1wID0gR2V0VGlja0NvdW50KCkgKyAyMDAwDQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZW5kDQoJCQlmb3IgXywgbWluaW9uIGluIHBhaXJzKGVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KCQkJCWlmIFZhbGlkVGFyZ2V0KG1pbmlvbiwgU2tpbGxFLnJhbmdlLCBmYWxzZSkgYW5kIG1pbmlvbiB+PSBuaWwgdGhlbg0KCQkJCQlpZiBHZXREaXN0YW5jZVNxcihtaW5pb24sIG1vdXNlUG9zKSA8PSBXYXJkRGlzdGFuY2UqV2FyZERpc3RhbmNlIHRoZW4NCgkJCQkJCUNhc3RTcGVsbChfRSwgbWluaW9uKQ0KCQkJCQkJSnVtcGVkID0gdHJ1ZQ0KCQkJCQkJU2tpbGxXYXJkLmxhc3RKdW1wID0gR2V0VGlja0NvdW50KCkgKyAyMDAwDQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZW5kDQoJCQlpZiBuZXh0KFdhcmRzKSB+PSBuaWwgdGhlbg0KCQkJCWZvciBpLCBvYmogaW4gcGFpcnMoV2FyZHMpIGRvIA0KCQkJCQlpZiBvYmoudmFsaWQgdGhlbg0KCQkJCQkJTW91c2VQb3MgPSBnZXRNb3VzZVBvcygpDQoJCQkJCQlpZiBHZXREaXN0YW5jZVNxcihvYmosIE1vdXNlUG9zKSA8PSBXYXJkRGlzdGFuY2UqV2FyZERpc3RhbmNlIHRoZW4NCgkJCQkJCQlDYXN0U3BlbGwoX0UsIG9iaikNCgkJCQkJCQlKdW1wZWQgPSB0cnVlDQoJCQkJCQkJU2tpbGxXYXJkLmxhc3RKdW1wID0gR2V0VGlja0NvdW50KCkgKyAyMDAwDQoJCQkJCQkgZW5kDQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZW5kDQoJCQkNCgkJCWlmIG5vdCBKdW1wZWQgYW5kIEdldFRpY2tDb3VudCgpID49IFNraWxsV2FyZC5sYXN0SnVtcCB0aGVuDQoJCQkJaWYgSXRlbXMuVHJpbmtldFdhcmQucmVhZHkgdGhlbg0KCQkJCQlTa2lsbFdhcmQuaXRlbVNsb3QgPSBJVEVNXzcNCgkJCQllbHNlaWYgSXRlbXMuUnVieVNpZ2h0U3RvbmUucmVhZHkgdGhlbg0KCQkJCQlTa2lsbFdhcmQuaXRlbVNsb3QgPSByc3RTbG90DQoJCQkJZWxzZWlmIEl0ZW1zLlNpZ2h0U3RvbmUucmVhZHkgdGhlbiANCgkJCQkJU2tpbGxXYXJkLml0ZW1TbG90ID0gc3NTbG90DQoJCQkJZWxzZWlmIEl0ZW1zLlNpZ2h0V2FyZC5yZWFkeSB0aGVuDQoJCQkJCVNraWxsV2FyZC5pdGVtU2xvdCA9IHN3U2xvdA0KCQkJCWVsc2VpZiBJdGVtcy5WaXNpb25XYXJkLnJlYWR5IHRoZW4NCgkJCQkJU2tpbGxXYXJkLml0ZW1TbG90ID0gdndTbG90DQoJCQkJZW5kDQoJCQkJDQoJCQkJaWYgU2tpbGxXYXJkLml0ZW1TbG90IH49IG5pbCB0aGVuDQoJCQkJCUNhc3RTcGVsbChTa2lsbFdhcmQuaXRlbVNsb3QsIHgsIHkpDQoJCQkJCUp1bXBlZCA9IHRydWUNCgkJCQkJU2tpbGxXYXJkLmxhc3RKdW1wID0gR2V0VGlja0NvdW50KCkgKyAyMDAwDQoJCQkJCVNraWxsV2FyZC5pdGVtU2xvdCA9IG5pbA0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCS0tLTwNCmVuZA0KLS0gLyBXYXJkIEp1bXBpbmcgRnVuY3Rpb24gLyAtLQ0KDQotLSAvIFVzZSBJdGVtcyBGdW5jdGlvbiAvIC0tDQpmdW5jdGlvbiBVc2VJdGVtcyhlbmVteSkNCgktLS0gVXNlIEl0ZW1zIChXaWxsIEltcHJvdmUgU29vbikgLS0tDQoJLS0tPg0KCQlpZiBub3QgZW5lbXkgdGhlbg0KCQkJZW5lbXkgPSBUYXJnZXQNCgkJZW5kDQoJCWlmIFZhbGlkVGFyZ2V0KGVuZW15KSBhbmQgZW5lbXkgfj0gbmlsIHRoZW4NCgkJCWlmIGRmZ1JlYWR5IGFuZCBHZXREaXN0YW5jZVNxcihlbmVteSkgPD0gNjAwKjYwMCB0aGVuIENhc3RTcGVsbChkZmdTbG90LCBlbmVteSkgZW5kDQoJCQlpZiBiZnRSZWFkeSBhbmQgR2V0RGlzdGFuY2VTcXIoZW5lbXkpIDw9IDYwMCo2MDAgdGhlbiBDYXN0U3BlbGwoYmZ0U2xvdCwgZW5lbXkpIGVuZA0KCQkJaWYgaHhnUmVhZHkgYW5kIEdldERpc3RhbmNlU3FyKGVuZW15KSA8PSA2MDAqNjAwIHRoZW4gQ2FzdFNwZWxsKGh4Z1Nsb3QsIGVuZW15KSBlbmQNCgkJCWlmIGJ3Y1JlYWR5IGFuZCBHZXREaXN0YW5jZVNxcihlbmVteSkgPD0gNDUwKjQ1MCB0aGVuIENhc3RTcGVsbChid2NTbG90LCBlbmVteSkgZW5kDQoJCQlpZiBicmtSZWFkeSBhbmQgR2V0RGlzdGFuY2VTcXIoZW5lbXkpIDw9IDQ1MCo0NTAgdGhlbiBDYXN0U3BlbGwoYnJrU2xvdCwgZW5lbXkpIGVuZA0KCQllbmQNCgktLS08DQoJLS0tIFVzZSBJdGVtcyAtLS0NCmVuZA0KLS0gLyBVc2UgSXRlbXMgRnVuY3Rpb24gLyAtLQ0KDQpmdW5jdGlvbiBVc2VDb25zdW1hYmxlcygpDQoJLS0tIENoZWNrIGlmIFpob255YS9Xb29nbGV0cyBOZWVkZWQgLS0NCgktLS0+DQoJCWlmIEthdGFyaW5hTWVudS5taXNjLlpXSXRlbXMgYW5kIGlzTG93KCdaaG9ueWEnKSBhbmQgVGFyZ2V0IGFuZCAoem5hUmVhZHkgb3Igd2d0UmVhZHkpIHRoZW4NCgkJCUNhc3RTcGVsbCgod2d0U2xvdCBvciB6bmFTbG90KSkNCgkJZW5kDQoJLS0tPA0KCS0tLSBDaGVjayBpZiBaaG9ueWEvV29vZ2xldHMgTmVlZGVkIC0tDQoJLS0tIENoZWNrIGlmIFBvdGlvbnMgTmVlZGVkIC0tDQoJLS0tPg0KCQlpZiBLYXRhcmluYU1lbnUubWlzYy5hSFAgYW5kIGlzTG93KCdIZWFsdGgnKSBhbmQgbm90IChVc2luZ0hQb3Qgb3IgVXNpbmdGbGFzaykgYW5kIChJdGVtcy5IZWFsdGhQb3QucmVhZHkgb3IgSXRlbXMuRmxhc2tQb3QucmVhZHkpIHRoZW4NCgkJCUNhc3RTcGVsbCgoaHBTbG90IG9yIGZza1Nsb3QpKQ0KCQllbmQNCgktLS08DQoJLS0tIENoZWNrIGlmIFBvdGlvbnMgTmVlZGVkIC0tDQplbmQJDQoNCi0tIC8gQXV0byBJZ25pdGUgRnVuY3Rpb24gLyAtLQ0KZnVuY3Rpb24gQXV0b0lnbml0ZShlbmVteSkNCgktLS0gU2ltcGxlIEF1dG8gSWduaXRlIC0tLQ0KCS0tLT4NCgkJaWYgZW5lbXkuaGVhbHRoIDw9IGlEbWcgYW5kIEdldERpc3RhbmNlU3FyKGVuZW15KSA8PSA2MDAqNjAwIHRoZW4NCgkJCWlmIGlSZWFkeSB0aGVuIENhc3RTcGVsbChpZ25pdGUsIGVuZW15KSBlbmQNCgkJZW5kDQoJLS0tPA0KCS0tLSBTaW1wbGUgQXV0byBJZ25pdGUgLS0tDQplbmQNCi0tIC8gQXV0byBJZ25pdGUgRnVuY3Rpb24gLyAtLQ0KDQotLSAvIERhbWFnZSBDYWxjdWxhdGlvbiBGdW5jdGlvbiAvIC0tDQpmdW5jdGlvbiBEYW1hZ2VDYWxjdWxhdGlvbigpDQoJLS0tIENhbGN1bGF0ZSBvdXIgRGFtYWdlIE9uIEVuZW1pZXMgLS0tDQoJLS0tPg0KIAkJZm9yIGk9MSwgaGVyb01hbmFnZXIuaUNvdW50IGRvDQoJCWxvY2FsIGVuZW15ID0gaGVyb01hbmFnZXI6R2V0SGVybyhpKQ0KCQkJaWYgVmFsaWRUYXJnZXQoZW5lbXkpIGFuZCBlbmVteSB+PSBuaWwgdGhlbg0KCQkJCWRmZ0RtZywgaHhnRG1nLCBid2NEbWcsIGlEbWcsIGJmdERtZywgbGlhbmRyeXNEbWcgPSAwLCAwLCAwLCAwLCAwLCAwDQoJCQkJcERtZyA9ICgoU2tpbGxRLnJlYWR5IGFuZCBnZXREbWcoIlEiLCBlbmVteSwgbXlIZXJvLCAyKSkgb3IgMCkNCgkJCQlxRG1nID0gKChTa2lsbFEucmVhZHkgYW5kIGdldERtZygiUSIsZW5lbXksbXlIZXJvKSkgb3IgMCkNCgkJCQl3RG1nID0gKChTa2lsbFcucmVhZHkgYW5kIGdldERtZygiVyIsZW5lbXksbXlIZXJvKSkgb3IgMCkNCgkJCQllRG1nID0gKChTa2lsbEUucmVhZHkgYW5kIGdldERtZygiRSIsZW5lbXksbXlIZXJvKSkgb3IgMCkNCgkJCQlyRG1nID0gZ2V0RG1nKCJSIixlbmVteSxteUhlcm8sMykNCgkJCQlkZmdEbWcgPSAoKGRmZ1JlYWR5IGFuZCBnZXREbWcoIkRGRyIsIGVuZW15LCBteUhlcm8pKSBvciAwKQ0KCQkJCWh4Z0RtZyA9ICgoaHhnUmVhZHkgYW5kIGdldERtZygiSFhHIiwgZW5lbXksIG15SGVybykpIG9yIDApDQoJCQkJYndjRG1nID0gKChid2NSZWFkeSBhbmQgZ2V0RG1nKCJCV0MiLCBlbmVteSwgbXlIZXJvKSkgb3IgMCkNCgkJCQliZnRkbWcgPSAoKGJmdFJlYWR5IGFuZCBnZXREbWcoIkJMQUNLRklSRSIsIGVuZW15LCBteUhlcm8pKSBvciAwKQ0KCQkJCWxpYW5kcnlzRG1nID0gKChsaWFuZHJ5c1JlYWR5IGFuZCBnZXREbWcoIkxJQU5EUllTIiwgZW5lbXksIG15SGVybykpIG9yIDApDQoJCQkJaURtZyA9ICgoaWduaXRlIGFuZCBnZXREbWcoIklHTklURSIsIGVuZW15LCBteUhlcm8pKSBvciAwKQ0KCQkJCW9uc3BlbGxEbWcgPSBsaWFuZHJ5c0RtZyArIGJmdERtZw0KCQkJCWl0ZW1zRG1nID0gZGZnRG1nICsgaHhnRG1nICsgYndjRG1nICsgaURtZyArIG9uc3BlbGxEbWcNCgktLS08DQoJLS0tIENhbGN1bGF0ZSBvdXIgRGFtYWdlIE9uIEVuZW1pZXMgLS0tDQoJLS0tIFNldHRpbmcgS2lsbFRleHQgQ29sb3IgJiBUZXh0IC0tLQ0KCS0tLT4NCgkJCQlpZiBlbmVteS5oZWFsdGggPiAocERtZyArIHFEbWcgKyBlRG1nICsgd0RtZyArIHJEbWcgKyBpdGVtc0RtZykgYW5kIGl0ZW1zRG1nIH49IDAgdGhlbg0KCQkJCQlLaWxsVGV4dFtpXSA9IDENCgkJCQllbHNlaWYgZW5lbXkuaGVhbHRoIDw9IHFEbWcgdGhlbg0KCQkJCQlpZiBTa2lsbFEucmVhZHkgdGhlbg0KCQkJCQkJS2lsbFRleHRbaV0gPSAyDQoJCQkJCWVsc2UNCgkJCQkJCUtpbGxUZXh0W2ldID0gMTENCgkJCQkJZW5kDQoJCQkJZWxzZWlmIGVuZW15LmhlYWx0aCA8PSB3RG1nIHRoZW4NCgkJCQkJaWYgU2tpbGxXLnJlYWR5IHRoZW4NCgkJCQkJCUtpbGxUZXh0W2ldID0gMw0KCQkJCQllbHNlDQoJCQkJCQlLaWxsVGV4dFtpXSA9IDExDQoJCQkJCWVuZA0KCQkJCWVsc2VpZiBlbmVteS5oZWFsdGggPD0gZURtZyB0aGVuDQoJCQkJCWlmIFNraWxsRS5yZWFkeSB0aGVuDQoJCQkJCQlLaWxsVGV4dFtpXSA9IDQNCgkJCQkJZWxzZQ0KCQkJCQkJS2lsbFRleHRbaV0gPSAxMQ0KCQkJCQllbmQNCgkJCQllbHNlaWYgZW5lbXkuaGVhbHRoIDw9IChxRG1nICsgd0RtZykgYW5kIFNraWxsUS5yZWFkeSBhbmQgU2tpbGxXLnJlYWR5IHRoZW4NCgkJCQkJaWYgU2tpbGxRLnJlYWR5IGFuZCBTa2lsbFcucmVhZHkgdGhlbg0KCQkJCQkJS2lsbFRleHRbaV0gPSA1DQoJCQkJCWVsc2UNCgkJCQkJCUtpbGxUZXh0W2ldID0gMTENCgkJCQkJZW5kDQoJCQkJZWxzZWlmIGVuZW15LmhlYWx0aCA8PSAocURtZyArIGVEbWcpIGFuZCBTa2lsbFEucmVhZHkgYW5kIFNraWxsRS5yZWFkeSB0aGVuDQoJCQkJCWlmIFNraWxsUS5yZWFkeSBhbmQgU2tpbGxFLnJlYWR5IHRoZW4NCgkJCQkJCUtpbGxUZXh0W2ldID0gNg0KCQkJCQllbHNlDQoJCQkJCQlLaWxsVGV4dFtpXSA9IDExDQoJCQkJCWVuZA0KCQkJCWVsc2VpZiBlbmVteS5oZWFsdGggPD0gKHdEbWcgKyBlRG1nKSBhbmQgU2tpbGxXLnJlYWR5IGFuZCBTa2lsbEUucmVhZHkgdGhlbg0KCQkJCQlpZiBTa2lsbFcucmVhZHkgYW5kIFNraWxsRS5yZWFkeSB0aGVuDQoJCQkJCQlLaWxsVGV4dFtpXSA9IDcNCgkJCQkJZWxzZQ0KCQkJCQkJS2lsbFRleHRbaV0gPSAxMQ0KCQkJCQllbmQNCgkJCQllbHNlaWYgZW5lbXkuaGVhbHRoIDw9IChxRG1nICsgd0RtZyArIGVEbWcpIGFuZCBTa2lsbFEucmVhZHkgYW5kIFNraWxsVy5yZWFkeSBhbmQgU2tpbGxFLnJlYWR5IHRoZW4NCgkJCQkJaWYgU2tpbGxRLnJlYWR5IGFuZCBTa2lsbFcucmVhZHkgYW5kIFNraWxsRS5yZWFkeSB0aGVuDQoJCQkJCQlLaWxsVGV4dFtpXSA9IDgNCgkJCQkJZWxzZQ0KCQkJCQkJS2lsbFRleHRbaV0gPSAxMQ0KCQkJCQllbmQNCgkJCQllbHNlaWYgKGVuZW15LmhlYWx0aCA8PSAocURtZyArIHdEbWcgKyBlRG1nICsgaXRlbXNEbWcpIG9yIGVuZW15LmhlYWx0aCA8PSAocURtZyArIHBEbWcgKyB3RG1nICsgZURtZyArIGl0ZW1zRG1nKSkgYW5kIFNraWxsUS5yZWFkeSBhbmQgU2tpbGxXLnJlYWR5IGFuZCBTa2lsbEUucmVhZHkgdGhlbg0KCQkJCQlpZiBTa2lsbFEucmVhZHkgYW5kIFNraWxsVy5yZWFkeSBhbmQgU2tpbGxFLnJlYWR5IHRoZW4NCgkJCQkJCUtpbGxUZXh0W2ldID0gOQ0KCQkJCQllbHNlDQoJCQkJCQlLaWxsVGV4dFtpXSA9IDExDQoJCQkJCWVuZA0KCQkJCWVsc2VpZiBlbmVteS5oZWFsdGggPD0gKHFEbWcgKyBwRG1nICsgd0RtZyArIGVEbWcgKyByRG1nICsgaXRlbXNEbWcpIHRoZW4NCgkJCQkJaWYgU2tpbGxRLnJlYWR5IGFuZCBTa2lsbFcucmVhZHkgYW5kIFNraWxsRS5yZWFkeSB0aGVuDQoJCQkJCQlLaWxsVGV4dFtpXSA9IDEwDQoJCQkJCWVsc2UNCgkJCQkJCUtpbGxUZXh0W2ldID0gMTENCgkJCQkJZW5kDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJLS0tPA0KCS0tLSBTZXR0aW5nIEtpbGxUZXh0IENvbG9yICYgVGV4dCAtLS0NCmVuZA0KLS0gLyBEYW1hZ2UgQ2FsY3VsYXRpb24gRnVuY3Rpb24gLyAtLQ0KDQotLSAvIEtpbGxTdGVhbCBGdW5jdGlvbiAvIC0tDQpmdW5jdGlvbiBLaWxsU3RlYWwoKQ0KCS0tLSBLaWxsU3RlYWwgTm8gV2FyZHMgLS0tDQoJLS0tPg0KCQlmb3IgXywgZW5lbXkgaW4gcGFpcnMoZW5lbXlIZXJvZXMpIGRvDQoJCQlpZiBlbmVteSB+PSBuaWwgYW5kIFZhbGlkVGFyZ2V0KGVuZW15KSB0aGVuDQoJCQkJbG9jYWwgZGlzdGFuY2UgPSBHZXREaXN0YW5jZVNxcihlbmVteSkNCgkJCQlsb2NhbCBoZWFsdGggPSBlbmVteS5oZWFsdGgNCgkJCQlpZiBoZWFsdGggPD0gcURtZyBhbmQgU2tpbGxRLnJlYWR5IGFuZCAoZGlzdGFuY2UgPD0gU2tpbGxRLnJhbmdlKlNraWxsUS5yYW5nZSkgdGhlbg0KCQkJCQlDYXN0UShlbmVteSkNCgkJCQllbHNlaWYgaGVhbHRoIDw9IHdEbWcgYW5kIFNraWxsVy5yZWFkeSBhbmQgKGRpc3RhbmNlIDw9IFNraWxsVy5yYW5nZSpTa2lsbFcucmFuZ2UpIHRoZW4NCgkJCQkJQ2FzdFcoZW5lbXkpDQoJCQkJZWxzZWlmIGhlYWx0aCA8PSBlRG1nIGFuZCBTa2lsbEUucmVhZHkgYW5kIChkaXN0YW5jZSA8PSBTa2lsbEUucmFuZ2UqU2tpbGxFLnJhbmdlKSB0aGVuDQoJCQkJCUNhc3RFKGVuZW15KQ0KCQkJCWVsc2VpZiBoZWFsdGggPD0gKHFEbWcgKyB3RG1nKSBhbmQgU2tpbGxRLnJlYWR5IGFuZCBTa2lsbFcucmVhZHkgYW5kIChkaXN0YW5jZSA8PSBTa2lsbFcucmFuZ2UqU2tpbGxXLnJhbmdlKSB0aGVuDQoJCQkJCUNhc3RXKGVuZW15KQ0KCQkJCWVsc2VpZiBoZWFsdGggPD0gKHFEbWcgKyBlRG1nKSBhbmQgU2tpbGxRLnJlYWR5IGFuZCBTa2lsbEUucmVhZHkgYW5kIChkaXN0YW5jZSA8PSBTa2lsbEUucmFuZ2UqU2tpbGxFLnJhbmdlKSB0aGVuDQoJCQkJCUNhc3RFKGVuZW15KQ0KCQkJCWVsc2VpZiBoZWFsdGggPD0gKHdEbWcgKyBlRG1nKSBhbmQgU2tpbGxXLnJlYWR5IGFuZCBTa2lsbEUucmVhZHkgYW5kIChkaXN0YW5jZSA8PSBTa2lsbFcucmFuZ2UqU2tpbGxXLnJhbmdlKSB0aGVuDQoJCQkJCUNhc3RXKGVuZW15KQ0KCQkJCWVsc2VpZiBoZWFsdGggPD0gKHFEbWcgKyB3RG1nICsgZURtZykgYW5kIFNraWxsUS5yZWFkeSBhbmQgU2tpbGxXLnJlYWR5IGFuZCBTa2lsbEUucmVhZHkgYW5kIChkaXN0YW5jZSA8PSBTa2lsbEUucmFuZ2UqU2tpbGxFLnJhbmdlKSB0aGVuDQoJCQkJCUNhc3RFKGVuZW15KQ0KCQkJCWVsc2VpZiBLYXRhcmluYU1lbnUua2lsbHN0ZWFsLnVsdEtTIHRoZW4NCgkJCQkJaWYgaGVhbHRoIDw9IChxRG1nICsgcERtZyArIHdEbWcgKyBlRG1nICsgckRtZykgYW5kIFNraWxsUS5yZWFkeSBhbmQgU2tpbGxXLnJlYWR5IGFuZCBTa2lsbEUucmVhZHkgYW5kIFNraWxsUi5yZWFkeSBhbmQgKGRpc3RhbmNlIDw9IFNraWxsRS5yYW5nZSpTa2lsbEUucmFuZ2UpIHRoZW4NCgkJCQkJCUNhc3RFKGVuZW15KQ0KCQkJCQkJQ2FzdFEoZW5lbXkpDQoJCQkJCQlDYXN0VyhlbmVteSkNCgkJCQkJCUNhc3RSKCkNCgkJCQkJZW5kDQoJCQkJCWlmIGhlYWx0aCA8PSByRG1nIGFuZCBkaXN0YW5jZSA8PSAoKFNraWxsUi5yYW5nZSpTa2lsbFIucmFuZ2UpIC0gMTAwKSB0aGVuDQoJCQkJCQlDYXN0UigpDQoJCQkJCWVuZA0KCQkJCWVsc2VpZiBLYXRhcmluYU1lbnUua2lsbHN0ZWFsLml0ZW1zS1MgdGhlbg0KCQkJCQlpZiBoZWFsdGggPD0gKHFEbWcgKyBwRG1nICsgd0RtZyArIGVEbWcgKyByRG1nICsgaXRlbXNEbWcpIHRoZW4NCgkJCQkJCWlmIFNraWxsUS5yZWFkeSBhbmQgU2tpbGxXLnJlYWR5IGFuZCBTa2lsbEUucmVhZHkgYW5kIFNraWxsUi5yZWFkeSB0aGVuDQoJCQkJCQkJVXNlSXRlbXMoZW5lbXkpDQoJCQkJCQllbmQNCgkJCQkJZWxzZWlmIGhlYWx0aCA8PSAocURtZyArIHdEbWcgKyBlRG1nICsgaXRlbXNEbWcpIGFuZCBoZWFsdGggPj0gKHFEbWcgKyB3RG1nICsgZURtZykgdGhlbg0KCQkJCQkJaWYgU2tpbGxRLnJlYWR5IGFuZCBTa2lsbFcucmVhZHkgYW5kIFNraWxsRS5yZWFkeSB0aGVuDQoJCQkJCQkJVXNlSXRlbXMoZW5lbXkpDQoJCQkJCQllbmQNCgkJCQkJZW5kDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJLS0tPA0KCS0tLSBLaWxsU3RlYWwgTm8gV2FyZHMgLS0tDQplbmQNCi0tIC8gS2lsbFN0ZWFsIEZ1bmN0aW9uIC8gLS0NCg0KLS0gLyBNaXNjIEZ1bmN0aW9ucyAvIC0tDQotLS0gRGFuZ2VyIENoZWNrIC0tLQ0KLS0tPg0KCWZ1bmN0aW9uIERhbmdlckNoZWNrKCkNCgkJaWYgaXNJbkRhbmdlcihteUhlcm8pIGFuZCBUYXJnZXQgdGhlbg0KCQkJZm9yIF8sIGFsbHkgaW4gcGFpcnMoYWxseUhlcm9lcykgZG8NCgkJCQlpZiBWYWxpZFRhcmdldChBbGx5LCBTa2lsbEUucmFuZ2UsIGZhbHNlKSBhbmQgQWxseSB+PSBuaWwgdGhlbg0KCQkJCQlpZiBHZXREaXN0YW5jZShBbGx5LCBUYXJnZXQpIDw9IEdldERpc3RhbmNlKG15SGVybywgVGFyZ2V0KSB0aGVuDQoJCQkJCQlpZiBTa2lsbEUucmVhZHkgdGhlbiBDYXN0U3BlbGwoX0UsIGFsbHkpIGVuZA0KCQkJCQllbmQNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgllbmQNCi0tLTwNCi0tLSBHZXQgTW91c2UgUG9zIEZ1bmN0aW9uIGJ5IEtsb2tqZSAtLS0NCi0tLT4NCglmdW5jdGlvbiBnZXRNb3VzZVBvcyhyYW5nZSkNCgkJbG9jYWwgdGVtcHJhbmdlID0gcmFuZ2Ugb3IgU2tpbGxXYXJkLnJhbmdlDQoJCWxvY2FsIE15UG9zID0gVmVjdG9yKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnopDQoJCWxvY2FsIE1vdXNlUG9zID0gVmVjdG9yKG1vdXNlUG9zLngsIG1vdXNlUG9zLnksIG1vdXNlUG9zLnopDQoNCgkJcmV0dXJuIE15UG9zIC0gKE15UG9zIC0gTW91c2VQb3MpOm5vcm1hbGl6ZWQoKSAqIFNraWxsV2FyZC5yYW5nZQ0KCWVuZA0KLS0tPA0KLS0tIEdldCBNb3VzZSBQb3MgRnVuY3Rpb24gYnkgS2xva2plIC0tLQ0KLS0tIE9uIEFuaW1hdGlvbiAoU2V0dGluZyBvdXIgbGFzdCBBbmltYXRpb24pIC0tLQ0KLS0tPg0KCWZ1bmN0aW9uIE9uQW5pbWF0aW9uKHVuaXQsIGFuaW1hdGlvbk5hbWUpDQoJCWlmIHVuaXQgPT0gbXlIZXJvIHRoZW4NCgkJCWlmIGFuaW1hdGlvbk5hbWUgPT0gIlNwZWxsNCIgdGhlbiANCgkJCQlTa2lsbFIuY2FzdGluZ1VsdCA9IHRydWUNCgkJCWVsc2UNCgkJCQlTa2lsbFIuY2FzdGluZ1VsdCA9IGZhbHNlDQoJCQllbmQNCgkJZW5kDQoJZW5kDQotLS08DQotLS0gT24gQW5pbWF0aW9uIChTZXR0aW5nIG91ciBsYXN0IEFuaW1hdGlvbikgLS0tDQotLS0gQ2hlY2tpbmcgaWYgSGVybyBpbiBEYW5nZXIgLS0tDQotLS0+DQoJZnVuY3Rpb24gaXNJbkRhbmdlcihoZXJvKQ0KCQluRW5lbWllc0Nsb3NlLCBuRW5lbWllc0ZhciA9IDAsIDANCgkJaHBQZXJjZW50ID0gaGVyby5oZWFsdGggLyBoZXJvLm1heEhlYWx0aA0KCQlmb3IgXywgZW5lbXkgaW4gcGFpcnMoZW5lbXlIZXJvZXMpIGRvDQoJCQkJaWYgbm90IGVuZW15LmRlYWQgYW5kIGhlcm86R2V0RGlzdGFuY2UoZW5lbXkpIDw9IDIwMCB0aGVuDQoJCQkJCQluRW5lbWllc0Nsb3NlID0gbkVuZW1pZXNDbG9zZSArIDENCgkJCQkJCWlmIGhwUGVyY2VudCA8IDAuNSBhbmQgaHBQZXJjZW50IDwgZW5lbXkuaGVhbHRoIC8gZW5lbXkubWF4SGVhbHRoIHRoZW4gcmV0dXJuIHRydWUgZW5kDQoJCQkJZWxzZWlmIG5vdCBlbmVteS5kZWFkIGFuZCBoZXJvOkdldERpc3RhbmNlKGVuZW15KSA8PSAxMDAwIHRoZW4NCgkJCQkJCW5FbmVtaWVzRmFyID0gbkVuZW1pZXNGYXIgKyAxDQoJCQkJZW5kDQoJCWVuZA0KCSAgIA0KCQlpZiBuRW5lbWllc0Nsb3NlID4gMSB0aGVuIHJldHVybiB0cnVlIGVuZA0KCQlpZiBuRW5lbWllc0Nsb3NlID09IDEgYW5kIG5FbmVtaWVzRmFyID4gMSB0aGVuIHJldHVybiB0cnVlIGVuZA0KCQlyZXR1cm4gZmFsc2UNCgllbmQNCi0tLTwNCi0tLSBDaGVja2luZyBpZiBIZXJvIGluIERhbmdlciAtLS0NCi0tLSBHZXQgSnVuZ2xlIE1vYiBGdW5jdGlvbiBieSBBcHBsZSAtLS0NCi0tLT4NCglmdW5jdGlvbiBHZXRKdW5nbGVNb2IoKQ0KCQlmb3IgXywgTW9iIGluIHBhaXJzKEp1bmdsZUZvY3VzTW9icykgZG8NCgkJCWlmIFZhbGlkVGFyZ2V0KE1vYiwgU2tpbGxRLnJhbmdlKSB0aGVuIHJldHVybiBNb2IgZW5kDQoJCWVuZA0KCQlmb3IgXywgTW9iIGluIHBhaXJzKEp1bmdsZU1vYnMpIGRvDQoJCQlpZiBWYWxpZFRhcmdldChNb2IsIFNraWxsUS5yYW5nZSkgdGhlbiByZXR1cm4gTW9iIGVuZA0KCQllbmQNCgllbmQNCi0tLTwNCi0tLSBHZXQgSnVuZ2xlIE1vYiBGdW5jdGlvbiBieSBBcHBsZSAtLS0NCi0tLSBBcnJhbmdlIFByaW9yaXRpZXMgNXY1IC0tLQ0KLS0tPg0KCWZ1bmN0aW9uIEFycmFuZ2VQcmlvcml0aWVzKCkNCgkJZm9yIGksIGVuZW15IGluIHBhaXJzKGVuZW15SGVyb2VzKSBkbw0KCQkJU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5BRF9DYXJyeSwgZW5lbXksIDEpDQoJCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLkFQLCBlbmVteSwgMikNCgkJCVNldFByaW9yaXR5KHByaW9yaXR5VGFibGUuU3VwcG9ydCwgZW5lbXksIDMpDQoJCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLkJydWlzZXIsIGVuZW15LCA0KQ0KCQkJU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5UYW5rLCBlbmVteSwgNSkNCgkJZW5kDQoJZW5kDQotLS08DQotLS0gQXJyYW5nZSBQcmlvcml0aWVzIDV2NSAtLS0NCi0tLSBBcnJhbmdlIFByaW9yaXRpZXMgM3YzIC0tLQ0KLS0tPg0KCWZ1bmN0aW9uIEFycmFuZ2VUVFByaW9yaXRpZXMoKQ0KCQlmb3IgaSwgZW5lbXkgaW4gcGFpcnMoZW5lbXlIZXJvZXMpIGRvDQoJCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLkFEX0NhcnJ5LCBlbmVteSwgMSkNCgkJCVNldFByaW9yaXR5KHByaW9yaXR5VGFibGUuQVAsIGVuZW15LCAxKQ0KCQkJU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5TdXBwb3J0LCBlbmVteSwgMikNCgkJCVNldFByaW9yaXR5KHByaW9yaXR5VGFibGUuQnJ1aXNlciwgZW5lbXksIDIpDQoJCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLlRhbmssIGVuZW15LCAzKQ0KCQllbmQNCgllbmQNCi0tLTwNCi0tLSBBcnJhbmdlIFByaW9yaXRpZXMgM3YzIC0tLQ0KLS0tIFNldCBQcmlvcml0aWVzIC0tLQ0KLS0tPg0KCWZ1bmN0aW9uIFNldFByaW9yaXR5KHRhYmxlLCBoZXJvLCBwcmlvcml0eSkNCgkJZm9yIGkgPSAxLCAjdGFibGUgZG8NCgkJCWlmIGhlcm8uY2hhck5hbWU6ZmluZCh0YWJsZVtpXSkgfj0gbmlsIHRoZW4NCgkJCQlUU19TZXRIZXJvUHJpb3JpdHkocHJpb3JpdHksIGhlcm8uY2hhck5hbWUpDQoJCQllbmQNCgkJZW5kDQoJZW5kDQotLS08DQotLS0gU2V0IFByaW9yaXRpZXMgLS0tDQotLSAvIE1pc2MgRnVuY3Rpb25zIC8gLS0NCg0KLS0gLyBPbiBTZW5kIFBhY2tldCBGdW5jdGlvbiAvIC0tDQpmdW5jdGlvbiBPblNlbmRQYWNrZXQocGFja2V0KQ0KCS0tIEJsb2NrIFBhY2tldHMgaWYgQ2hhbm5lbGluZyAtLQ0KCS0tLT4NCgkJbG9jYWwgU2VuZFAgPSBQYWNrZXQocGFja2V0KQ0KCQlpZiBTa2lsbFIuY2FzdGluZ1VsdCBhbmQgbm90IFdhcmRKdW1wS2V5IHRoZW4NCgkJCQlpZiAoU2VuZFA6Z2V0KCduYW1lJykgPT0gJ1NfTU9WRScgb3IgU2VuZFA6Z2V0KCduYW1lJykgPT0gJ1NfQ0FTVCcpIGFuZCBTZW5kUDpnZXQoJ3NvdXJjZU5ldHdvcmtJZCcpID09IG15SGVyby5uZXR3b3JrSUQgYW5kIChTZW5kUDpnZXQoJ3NwZWxsSWQnKSB+PSBTVU1NT05FUl8xIGFuZCBTZW5kUDpnZXQoJ3NwZWxsSWQnKSB+PSBTVU1NT05FUl8yKSB0aGVuDQoJCQkJaWYgS2F0YXJpbmFNZW51LmNvbWJvLnN0b3BVbHQgdGhlbg0KCQkJCQlpZiBub3QgU2tpbGxRLnJlYWR5IGFuZCBub3QgU2tpbGxXLnJlYWR5IGFuZCBub3QgU2tpbGxFLnJlYWR5IGFuZCBWYWxpZFRhcmdldChUYXJnZXQpIGFuZCBUYXJnZXQgfj0gbmlsIGFuZCBUYXJnZXQuaGVhbHRoID4gKHFEbWcgKyB3RG1nICsgZURtZykgdGhlbg0KCQkJCQkJLS0gUHJpbnRDaGF0KCJEZWJ1ZyAxIikNCgkJCQkJCVNlbmRQOmJsb2NrKCkNCgkJCQkJZW5kDQoJCQkJZW5kDQoJCQkJaWYgS2F0YXJpbmFNZW51LmNvbWJvLmF1dG9FIHRoZW4NCgkJCQkJaWYgUGFja2V0KHApOmdldCgnc3BlbGxJZCcpIH49IFNQRUxMXzMgdGhlbg0KCQkJCQkJLS0gUHJpbnRDaGF0KCJEZWJ1ZyAyIikNCgkJCQkJCVNlbmRQOmJsb2NrKCkNCgkJCQkJZW5kDQoJCQkJZW5kDQoJCQkJaWYgbm90IEthdGFyaW5hTWVudS5jb21iby5zdG9wVWx0IGFuZCBub3QgS2F0YXJpbmFNZW51LmNvbWJvLmF1dG9FIHRoZW4NCgkJCQkJLS0gUHJpbnRDaGF0KCJEZWJ1ZyAzIikNCgkJCQkJU2VuZFA6YmxvY2soKQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVsc2UNCgkJCWlmIChTZW5kUDpnZXQoJ25hbWUnKSA9PSAnU19DQVNUJykgYW5kIChTZW5kUDpnZXQoJ3NvdXJjZU5ldHdvcmtJZCcpID09IG15SGVyby5uZXR3b3JrSUQpIGFuZCAoU2VuZFA6Z2V0KCdzcGVsbElkJykgPT0gX1IpIHRoZW4NCgkJCQlTa2lsbFIuY2FzdGluZ1VsdCA9IHRydWUNCgkJCWVuZA0KCQllbmQNCgktLS08DQoJLS0tIEJsb2NrIFBhY2tldHMgaWYgQ2hhbm5lbGluZyAtLQ0KZW5kDQotLSAvIE9uIFNlbmQgUGFja2V0IEZ1bmN0aW9uIC8gLS0NCg0KLS0gLyBPbiBDcmVhdGUgT2JqIEZ1bmN0aW9uIC8gLS0NCmZ1bmN0aW9uIE9uQ3JlYXRlT2JqKG9iaikNCgktLS0gQWxsIG9mIE91ciBPYmplY3RzIChDUkVBVEUpIC0tDQoJLS0+DQoJCWlmIG9iaiB+PSBuaWwgdGhlbg0KCQkJaWYgKG9iai5uYW1lOmZpbmQoImthdGFyaW5hX2RlYXRoTG90dXNfbWlzLnRyb3kiKSBvciBvYmoubmFtZTpmaW5kKCJrYXRhcmluYV9kZWF0aExvdHVzX3Rhci50cm95IikpIHRoZW4NCgkJCQlpZiBHZXREaXN0YW5jZVNxcihvYmosIG15SGVybykgPD0gNzAqNzAgdGhlbg0KCQkJCQlTa2lsbFIuY2FzdGluZ1VsdCA9IHRydWUNCgkJCQkJLS1QcmludENoYXQoIk9uQ3JlYXRlT2JqZWN0OiBDYXN0aW5nIFVsdCIpDQoJCQkJZW5kDQoJCQllbmQNCgkJCWlmIChvYmoubmFtZTpmaW5kKCJrYXRhcmluYV9kZWF0aGxvdHVzX3N1Y2Nlc3MudHJveSIpIG9yIG9iai5uYW1lOmZpbmQoIkthdGFyaW5hX2RlYXRoTG90dXNfZW1wdHkudHJveSIpKSB0aGVuDQoJCQkJaWYgR2V0RGlzdGFuY2VTcXIob2JqLCBteUhlcm8pIDw9IDcwKjcwIHRoZW4NCgkJCQkJU2tpbGxSLmNhc3RpbmdVbHQgPSB0cnVlDQoJCQkJCS0tUHJpbnRDaGF0KCJPbkNyZWF0ZU9iamVjdDogQ2FzdGluZyBVbHQiKQ0KCQkJCWVuZA0KCQkJZW5kDQoJCQlpZiBvYmoubmFtZTpmaW5kKCJHbG9iYWxfSXRlbV9IZWFsdGhQb3Rpb24udHJveSIpIHRoZW4NCgkJCQlpZiBHZXREaXN0YW5jZVNxcihvYmosIG15SGVybykgPD0gNzAqNzAgdGhlbg0KCQkJCQlVc2luZ0hQb3QgPSB0cnVlDQoJCQkJZW5kDQoJCQllbmQNCgkJCWlmIG9iai52YWxpZCBhbmQgKHN0cmluZy5maW5kKG9iai5uYW1lLCAiV2FyZCIpIH49IG5pbCBvciBzdHJpbmcuZmluZChvYmoubmFtZSwgIldyaWdnbGUiKSB+PSBuaWwgb3Igc3RyaW5nLmZpbmQob2JqLm5hbWUsICJUcmlua2V0IikpIHRoZW4gDQoJCQkJV2FyZHNbI1dhcmRzKzFdID0gb2JqDQoJCQllbmQNCgkJCWlmIEZvY3VzSnVuZ2xlTmFtZXNbb2JqLm5hbWVdIHRoZW4NCgkJCQlKdW5nbGVGb2N1c01vYnNbI0p1bmdsZUZvY3VzTW9icysxXSA9IG9iag0KCQkJZWxzZWlmIEp1bmdsZU1vYk5hbWVzW29iai5uYW1lXSB0aGVuDQoJCQkJSnVuZ2xlTW9ic1sjSnVuZ2xlTW9icysxXSA9IG9iag0KCQkJZW5kDQoJCWVuZA0KCS0tLTwNCgktLS0gQWxsIG9mIE91ciBPYmplY3RzIChDUkVBVEUpIC0tDQplbmQNCi0tIC8gT24gQ3JlYXRlIE9iaiBGdW5jdGlvbiAvIC0tDQoNCi0tIC8gT24gRGVsZXRlIE9iaiBGdW5jdGlvbiAvIC0tDQpmdW5jdGlvbiBPbkRlbGV0ZU9iaihvYmopDQoJLS0tIEFsbCBvZiBPdXIgT2JqZWN0cyAoQ0xFQVIpIC0tDQoJLS0tPg0KCQlpZiBvYmogfj0gbmlsIHRoZW4NCgkJCWlmIG9iai5uYW1lOmZpbmQoIlRlbGVwb3J0SG9tZS50cm95IikgdGhlbg0KCQkJCVJlY2FsbCA9IGZhbHNlDQoJCQllbmQNCgkJCWlmIG9iai5uYW1lOmZpbmQoIkdsb2JhbF9JdGVtX0hlYWx0aFBvdGlvbi50cm95IikgdGhlbg0KCQkJCVVzaW5nSFBvdCA9IGZhbHNlDQoJCQllbmQNCgkJCWZvciBpLCBNb2IgaW4gcGFpcnMoSnVuZ2xlTW9icykgZG8NCgkJCQlpZiBvYmoubmFtZSA9PSBNb2IubmFtZSB0aGVuDQoJCQkJCXRhYmxlLnJlbW92ZShKdW5nbGVNb2JzLCBpKQ0KCQkJCWVuZA0KCQkJZW5kDQoJCQlmb3IgaSwgTW9iIGluIHBhaXJzKEp1bmdsZUZvY3VzTW9icykgZG8NCgkJCQlpZiBvYmoubmFtZSA9PSBNb2IubmFtZSB0aGVuDQoJCQkJCXRhYmxlLnJlbW92ZShKdW5nbGVGb2N1c01vYnMsIGkpDQoJCQkJZW5kDQoJCQllbmQNCgkJCWZvciBpLCB3YXJkIGluIHBhaXJzKFdhcmRzKSBkbw0KCQkJCWlmIG5vdCB3YXJkLnZhbGlkIG9yIChvYmoubmFtZSA9PSB3YXJkLm5hbWUgYW5kIG9iai54ID09IHdhcmQueCBhbmQgb2JqLnogPT0gd2FyZC56KSB0aGVuDQoJCQkJCXRhYmxlLnJlbW92ZShXYXJkcywgaSkNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgktLS0gQWxsIG9mIE91ciBPYmplY3RzIChDTEVBUikgLS0NCgktLS08DQplbmQNCi0tLSBBbGwgVGhlIE9iamVjdHMgaW4gVGhlIFdvcmxkIExpdGVyYWxseSAtLS0NCi0tIC8gT24gRGVsZXRlIE9iaiBGdW5jdGlvbiAvIC0tDQoNCi0tIC8gT24gRHJhdyBGdW5jdGlvbiAvIC0tDQpmdW5jdGlvbiBPbkRyYXcoKQ0KCS0tLSBUaWNrIE1hbmFnZXIgQ2hlY2sgLS0tDQoJLS0tPg0KCQlpZiBub3QgVE1hbmFnZXIub25EcmF3OmlzUmVhZHkoKSBhbmQgS2F0YXJpbmFNZW51Lm1pc2MudVRNIHRoZW4gcmV0dXJuIGVuZA0KCS0tLTwNCgktLS0+DQoJLS0tIERyYXdpbmcgT3VyIFJhbmdlcyAtLS0NCgktLS0+DQoJCWlmIG5vdCBteUhlcm8uZGVhZCB0aGVuDQoJCQlpZiBub3QgS2F0YXJpbmFNZW51LmRyYXdpbmcuZGlzYWJsZUFsbCB0aGVuDQoJCQkJaWYgU2tpbGxRLnJlYWR5IGFuZCBLYXRhcmluYU1lbnUuZHJhd2luZy5kcmF3USB0aGVuIA0KCQkJCQlEcmF3Q2lyY2xlKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIFNraWxsUS5yYW5nZSwgU2tpbGxRLmNvbG9yKQ0KCQkJCWVuZA0KCQkJCWlmIFNraWxsVy5yZWFkeSBhbmQgS2F0YXJpbmFNZW51LmRyYXdpbmcuZHJhd1cgdGhlbg0KCQkJCQlEcmF3Q2lyY2xlKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIFNraWxsVy5yYW5nZSwgU2tpbGxXLmNvbG9yKQ0KCQkJCWVuZA0KCQkJCWlmIFNraWxsRS5yZWFkeSBhbmQgS2F0YXJpbmFNZW51LmRyYXdpbmcuZHJhd0UgdGhlbg0KCQkJCQlEcmF3Q2lyY2xlKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIFNraWxsRS5yYW5nZSwgU2tpbGxFLmNvbG9yKQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCS0tLTwNCgktLS0gRHJhd2luZyBPdXIgUmFuZ2VzIC0tLQ0KCS0tLSBEcmF3IEVuZW15IERhbWFnZSBUZXh0IC0tLQ0KCS0tLT4NCgkJaWYgS2F0YXJpbmFNZW51LmRyYXdpbmcuZHJhd1RleHQgdGhlbg0KCQkJZm9yIGkgPSAxLCBoZXJvTWFuYWdlci5pQ291bnQgZG8NCgkJCQlsb2NhbCBlbmVteSA9IGhlcm9NYW5hZ2VyOkdldEhlcm8oaSkNCgkJCQlpZiBWYWxpZFRhcmdldChlbmVteSkgYW5kIGVuZW15IH49IG5pbCB0aGVuDQoJCQkJCWxvY2FsIGJhclBvcyA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjMoZW5lbXkueCwgZW5lbXkueSwgZW5lbXkueikpIC0tKENyZWRpdCB0byBaaWtrYWgpDQoJCQkJCWxvY2FsIFBvc1ggPSBiYXJQb3MueCAtIDM1DQoJCQkJCWxvY2FsIFBvc1kgPSBiYXJQb3MueSAtIDEwDQoJCQkJCWlmIEtpbGxUZXh0W2ldIH49IDEwIHRoZW4NCgkJCQkJCURyYXdUZXh0KFRleHRMaXN0W0tpbGxUZXh0W2ldXSwgMTYsIFBvc1gsIFBvc1ksIGNvbG9yVGV4dCkNCgkJCQkJZWxzZQ0KCQkJCQkJRHJhd1RleHQoVGV4dExpc3RbS2lsbFRleHRbaV1dIC4uIHN0cmluZy5mb3JtYXQoIiU0LjFmIiwgKChlbmVteS5oZWFsdGggLSAocURtZyArIHBEbWcgKyB3RG1nICsgZURtZyArIGl0ZW1zRG1nKSkgKiAoMS9yRG1nKSkgKiAyLjUpIC4uICJzID0gS2lsbCIsIDE2LCBQb3NYLCBQb3NZLCBjb2xvclRleHQpDQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCS0tLTwNCgktLS0gRHJhdyBFbmVteSBEYW1hZ2UgVGV4dCAtLS0NCgktLS0gRHJhdyBFbmVteSBUYXJnZXQgLS0tDQoJLS0tPg0KCQlpZiBUYXJnZXQgdGhlbg0KCQkJaWYgS2F0YXJpbmFNZW51LmRyYXdpbmcuZHJhd1RhcmdldFRleHQgdGhlbg0KCQkJCURyYXdUZXh0KCJUYXJnZXRpbmc6ICIgLi4gVGFyZ2V0LmNoYXJOYW1lLCAxMiwgMTAwLCAxMDAsIGNvbG9yVGV4dCkNCgkJCWVuZA0KCQllbmQNCgktLS08DQoJLS0tIERyYXcgRW5lbXkgVGFyZ2V0IC0tLQ0KCS0tLSBEcmF3IFdhcmQgSnVtcCBSYW5nZSBhbmQgTW91c2UgLS0tDQoJLS0tPg0KCQlpZiBXYXJkSnVtcEtleSB0aGVuDQoJCQlpZiBTa2lsbEUucmVhZHkgdGhlbg0KCQkJCURyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCBTa2lsbFdhcmQucmFuZ2UsIDIsIHdhcmRDb2xvci5hdmFpbGFibGUsIDUwKQ0KCQkJCWlmIEdldERpc3RhbmNlU3FyKG1vdXNlUG9zKSA8PSBTa2lsbFdhcmQucmFuZ2UqU2tpbGxXYXJkLnJhbmdlIHRoZW4NCgkJCQkJRHJhd0NpcmNsZTNEKG1vdXNlUG9zLngsIG1vdXNlUG9zLnksIG1vdXNlUG9zLnosIDUwLCAyLCB3YXJkQ29sb3IuYXZhaWxhYmxlLCAyMCkNCgkJCQllbHNlDQoJCQkJCURyYXdDaXJjbGUzRChtb3VzZVBvcy54LCBtb3VzZVBvcy55LCBtb3VzZVBvcy56LCA1MCwgMiwgd2FyZENvbG9yLnVuYXZhaWxhYmxlLCAyMCkNCgkJCQllbmQNCgkJCQlpZiAoR2V0RGlzdGFuY2VTcXIobW91c2VQb3MpIDw9IDcwMCo3MDAgYW5kIEdldERpc3RhbmNlU3FyKG1vdXNlUG9zKSA+IFNraWxsV2FyZC5yYW5nZSpTa2lsbFdhcmQucmFuZ2UpIG9yIG5vdCAoSXRlbXMuVHJpbmtldFdhcmQucmVhZHkgb3IgSXRlbXMuUnVieVNpZ2h0U3RvbmUucmVhZHkgb3IgSXRlbXMuU2lnaHRTdG9uZS5yZWFkeSBvciBJdGVtcy5WaXNpb25XYXJkLnJlYWR5KSB0aGVuDQoJCQkJCURyYXdDaXJjbGUzRChtb3VzZVBvcy54LCBtb3VzZVBvcy55LCBtb3VzZVBvcy56LCA1MCwgMiwgd2FyZENvbG9yLnNlYXJjaGluZywgMjApDQoJCQkJZW5kDQoJCQllbHNlDQoJCQkJRHJhd0NpcmNsZTNEKG1vdXNlUG9zLngsIG1vdXNlUG9zLnksIG1vdXNlUG9zLnosIDUwLCAyLCB3YXJkQ29sb3IudW5hdmFpbGFibGUsIDIwKQ0KCQkJZW5kDQoJCWVuZA0KCS0tLTwNCgktLS0gRHJhdyBXYXJkIEp1bXAgUmFuZ2UgYW5kIE1vdXNlIC0tLQ0KZW5kDQotLSAvIE9uIERyYXcgRnVuY3Rpb24gLyAtLQ0KDQotLSAvIE9uV25kTXNnIEZ1bmN0aW9uIC8gLS0NCmZ1bmN0aW9uIE9uV25kTXNnKG1zZywga2V5KQ0KCWlmIG1zZyA9PSBXTV9SQlVUVE9ORE9XTiBhbmQgU2tpbGxSLmNhc3RpbmdVbHQgdGhlbiANCgkJU2tpbGxSLmNhc3RpbmdVbHQgPSBmYWxzZQ0KCWVuZA0KZW5kDQotLSAvIE9uV25kTXNnIEZ1bmN0aW9uIC8gLS0NCg0KLS0gLyBPbkdhaW5CdWZmIEZ1bmN0aW9uIC8gLS0NCmZ1bmN0aW9uIE9uR2FpbkJ1ZmYodW5pdCwgYnVmZikNCglpZiB1bml0LmlzTWUgYW5kIGJ1ZmYubmFtZSA9PSAia2F0YXJpbmFyc291bmQiIHRoZW4NCgkJU2tpbGxSLmNhc3RpbmdVbHQgPSB0cnVlDQoJZW5kDQplbmQNCi0tIC8gT25HYWluQnVmZiBGdW5jdGlvbiAvIC0tDQoNCi0tIC8gT25Mb3NlQnVmZiBGdW5jdGlvbiAvIC0tDQpmdW5jdGlvbiBPbkxvc2VCdWZmKHVuaXQsIGJ1ZmYpDQoJaWYgdW5pdC5pc01lIGFuZCBidWZmLm5hbWUgPT0gImthdGFyaW5hcnNvdW5kIiB0aGVuDQoJCVNraWxsUi5jYXN0aW5nVWx0ID0gZmFsc2UNCgllbmQNCmVuZA0KLS0gLyBPbkxvc2VCdWZmIEZ1bmN0aW9uIC8gLS0NCg0KLS0gLyBPbiBQcm9jZXNzIFNwZWxsIC8gLS0NCmZ1bmN0aW9uIE9uUHJvY2Vzc1NwZWxsKG9iamVjdCxzcGVsbCkNCgktLS0gVGljayBNYW5hZ2VyIENoZWNrIC0tLQ0KCS0tLT4NCgkJaWYgbm90IFRNYW5hZ2VyLm9uU3BlbGw6aXNSZWFkeSgpIGFuZCBLYXRhcmluYU1lbnUubWlzYy51VE0gdGhlbiByZXR1cm4gZW5kDQoJLS0tPA0KCS0tLT4NCgkJaWYgb2JqZWN0ID09IG15SGVybyB0aGVuDQoJCQlpZiBzcGVsbC5uYW1lOmxvd2VyKCk6ZmluZCgia2F0YXJpbmFyIikgdGhlbg0KCQkJCVNraWxsUi5jYXN0aW5nVWx0ID0gdHJ1ZQ0KCQkJZW5kDQoJCWVuZA0KCS0tLTwNCmVuZA0KLS0gLyBPbiBQcm9jZXNzIFNwZWxsIC8gLS0NCg0KLS0gLyBGUFMgTWFuYWdlciBGdW5jdGlvbnMgLyAtLQ0KY2xhc3MgJ1RpY2tNYW5hZ2VyJw0KLS0tIFRNIEluaXQgRnVuY3Rpb24gLS0tDQotLS0+DQoJZnVuY3Rpb24gVGlja01hbmFnZXI6X19pbml0KHRpY2tzUGVyU2Vjb25kKQ0KCQlzZWxmLlRQUyA9IHRpY2tzUGVyU2Vjb25kDQoJCXNlbGYubGFzdENsb2NrID0gMA0KCQlzZWxmLmN1cnJlbnRDbG9jayA9IDANCgllbmQNCi0tLTwNCi0tLSBUTSBJbml0IEZ1bmN0aW9uIC0tLQ0KLS0tIFRNIFR5cGUgRnVuY3Rpb24gLS0tDQotLS0+DQoJZnVuY3Rpb24gVGlja01hbmFnZXI6X190eXBlKCkNCgkJcmV0dXJuICJUaWNrTWFuYWdlciINCgllbmQNCi0tLTwNCi0tLSBUTSBJbml0IEZ1bmN0aW9uIC0tLQ0KLS0tIFNldCBUUFMgRnVuY3Rpb24gLS0tDQotLS0+DQoJZnVuY3Rpb24gVGlja01hbmFnZXI6c2V0VFBTKHRpY2tzUGVyU2Vjb25kKQ0KCQlzZWxmLlRQUyA9IHRpY2tzUGVyU2Vjb25kDQoJZW5kDQotLS08DQotLS0gU2V0IFRQUyBGdW5jdGlvbiAtLS0NCi0tLSBHZXQgVFBTIEZ1bmN0aW9uIC0tLQ0KLS0tPg0KCWZ1bmN0aW9uIFRpY2tNYW5hZ2VyOmdldFRQUyh0aWNrc1BlclNlY29uZCkNCgkJcmV0dXJuIHNlbGYuVFBTDQoJZW5kDQotLS08DQotLS0gR2V0IFRQUyBGdW5jdGlvbiAtLS0NCi0tLSBUTSBSZWFkeSBGdW5jdGlvbiAtLS0NCi0tLT4NCglmdW5jdGlvbiBUaWNrTWFuYWdlcjppc1JlYWR5KCkNCgkJc2VsZi5jdXJyZW50Q2xvY2sgPSBvcy5jbG9jaygpDQoJCWlmIHNlbGYuY3VycmVudENsb2NrIDwgc2VsZi5sYXN0Q2xvY2sgKyAoMSAvIHNlbGYuVFBTKSB0aGVuIHJldHVybiBmYWxzZSBlbmQNCgkJc2VsZi5sYXN0Q2xvY2sgPSBzZWxmLmN1cnJlbnRDbG9jaw0KCQlyZXR1cm4gdHJ1ZQ0KCWVuZA0KLS0tPA0KLS0tIFRNIFJlYWR5IEZ1bmN0aW9uIC0tLQ0KLS0gLyBGUFMgTWFuYWdlciBGdW5jdGlvbnMgLyAtLQ0KaWYgVklQX1VTRVIgdGhlbg0KCS0tIC8gTGFnIEZyZWUgQ2lyY2xlcyBGdW5jdGlvbnMgLyAtLQ0KCS0tLSBEcmF3IENpcmNsZSBOZXh0IExldmVsIEZ1bmN0aW9uIC0tLQ0KCS0tLT4NCgkJZnVuY3Rpb24gRHJhd0NpcmNsZU5leHRMdmwoeCwgeSwgeiwgcmFkaXVzLCB3aWR0aCwgY29sb3IsIGNob3JkbGVuZ3RoKQ0KCQkJcmFkaXVzID0gcmFkaXVzIG9yIDMwMA0KCQkJcXVhbGl0eSA9IG1hdGgubWF4KDgsIHJvdW5kKDE4MCAvIG1hdGguZGVnKChtYXRoLmFzaW4oKGNob3JkbGVuZ3RoIC8gKDIgKiByYWRpdXMpKSkpKSkpDQoJCQlxdWFsaXR5ID0gMiAqIG1hdGgucGkgLyBxdWFsaXR5DQoJCQlyYWRpdXMgPSByYWRpdXMgKiAuOTINCgkJCWxvY2FsIHBvaW50cyA9IHt9DQoJCQkNCgkJCWZvciB0aGV0YSA9IDAsIDIgKiBtYXRoLnBpICsgcXVhbGl0eSwgcXVhbGl0eSBkbw0KCQkJCWxvY2FsIGMgPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKHggKyByYWRpdXMgKiBtYXRoLmNvcyh0aGV0YSksIHksIHogLSByYWRpdXMgKiBtYXRoLnNpbih0aGV0YSkpKQ0KCQkJCXBvaW50c1sjcG9pbnRzICsgMV0gPSBEM0RYVkVDVE9SMihjLngsIGMueSkNCgkJCWVuZA0KCQkJDQoJCQlEcmF3TGluZXMyKHBvaW50cywgd2lkdGggb3IgMSwgY29sb3Igb3IgNDI5NDk2NzI5NSkNCgkJZW5kDQoJLS0tPA0KCS0tLSBEcmF3IENpY2xlIE5leHQgTGV2ZWwgRnVuY3Rpb24gLS0tDQoJLS0tIFJvdW5kIEZ1bmN0aW9uIC0tLQ0KCS0tLT4NCgkJZnVuY3Rpb24gcm91bmQobnVtKSANCgkJCWlmIG51bSA+PSAwIHRoZW4gcmV0dXJuIG1hdGguZmxvb3IobnVtKy41KSBlbHNlIHJldHVybiBtYXRoLmNlaWwobnVtLS41KSBlbmQNCgkJZW5kDQoJLS0tPA0KCS0tLSBSb3VuZCBGdW5jdGlvbiAtLS0NCgktLS0gRHJhdyBDaWNsZSAyIEZ1bmN0aW9uIC0tLQ0KCS0tLT4NCgkJZnVuY3Rpb24gRHJhd0NpcmNsZTIoeCwgeSwgeiwgcmFkaXVzLCBjb2xvcikNCgkJCWxvY2FsIHZQb3MxID0gVmVjdG9yKHgsIHksIHopDQoJCQlsb2NhbCB2UG9zMiA9IFZlY3RvcihjYW1lcmFQb3MueCwgY2FtZXJhUG9zLnksIGNhbWVyYVBvcy56KQ0KCQkJbG9jYWwgdFBvcyA9IHZQb3MxIC0gKHZQb3MxIC0gdlBvczIpOm5vcm1hbGl6ZWQoKSAqIHJhZGl1cw0KCQkJbG9jYWwgc1BvcyA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjModFBvcy54LCB0UG9zLnksIHRQb3MueikpDQoJCQkNCgkJCWlmIE9uU2NyZWVuKHsgeCA9IHNQb3MueCwgeSA9IHNQb3MueSB9LCB7IHggPSBzUG9zLngsIHkgPSBzUG9zLnkgfSkgdGhlbg0KCQkJCURyYXdDaXJjbGVOZXh0THZsKHgsIHksIHosIHJhZGl1cywgMSwgY29sb3IsIEthdGFyaW5hTWVudS5kcmF3aW5nLmxmYy5DTCkgDQoJCQllbmQNCgkJZW5kDQoJLS0tPA0KCS0tLSBEcmF3IENpY2xlIDIgRnVuY3Rpb24gLS0tDQoJLS0gLyBMYWcgRnJlZSBDaXJjbGVzIEZ1bmN0aW9ucyAvIC0tDQplbmQNCg0KLS0gLyBDaGVja3MgRnVuY3Rpb24gLyAtLQ0KZnVuY3Rpb24gQ2hlY2tzKCkNCgktLS0gVGljayBNYW5hZ2VyIENoZWNrIC0tLQ0KCS0tLT4NCgkJaWYgbm90IFRNYW5hZ2VyLm9uVGljazppc1JlYWR5KCkgYW5kIEthdGFyaW5hTWVudS5taXNjLnVUTSB0aGVuIHJldHVybiBlbmQNCgktLS08DQoJLS0tIFRpY2sgTWFuYWdlciBDaGVjayAtLS0NCglpZiBWSVBfVVNFUiB0aGVuDQoJCS0tLSBMRkMgQ2hlY2tzIC0tLQ0KCQktLS0+DQoJCQlpZiBub3QgS2F0YXJpbmFNZW51LmRyYXdpbmcubGZjLkxhZ0ZyZWUgdGhlbiANCgkJCQlfRy5EcmF3Q2lyY2xlID0gX0cub2xkRHJhd0NpcmNsZSANCgkJCWVsc2UNCgkJCQlfRy5EcmF3Q2lyY2xlID0gRHJhd0NpcmNsZTINCgkJCWVuZA0KCQktLS08DQoJCS0tLSBMRkMgQ2hlY2tzIC0tLQ0KCWVuZA0KCS0tLSBVcGRhdGVzICYgQ2hlY2tzIGlmIFRhcmdldCBpcyBWYWxpZCAtLS0NCgktLS0+DQoJCVRhcmdldFNlbGVjdG9yLnJhbmdlID0gVGFyZ2V0U2VsZWN0b3JSYW5nZSgpDQoNCgkJdHNUYXJnZXQgPSBHZXRUYXJnZXQoKQ0KCQlpZiB0c1RhcmdldCBhbmQgdHNUYXJnZXQudHlwZSA9PSBteUhlcm8udHlwZSB0aGVuDQoJCQlUYXJnZXQgPSB0c1RhcmdldA0KCQllbHNlDQoJCQlUYXJnZXQgPSBuaWwNCgkJZW5kDQoNCgkJa1NPVzpGb3JjZVRhcmdldChUYXJnZXQpDQoJLS0tPA0KCS0tLSBVcGRhdGVzICYgQ2hlY2tzIGlmIFRhcmdldCBpcyBWYWxpZCAtLS0JDQoJLS0tIENoZWNrcyBhbmQgZmluZHMgSWduaXRlIC0tLQ0KCS0tLT4NCgkJaWYgbXlIZXJvOkdldFNwZWxsRGF0YShTVU1NT05FUl8xKS5uYW1lOmZpbmQoIlN1bW1vbmVyRG90IikgdGhlbg0KCQkJaWduaXRlID0gU1VNTU9ORVJfMQ0KCQllbHNlaWYgbXlIZXJvOkdldFNwZWxsRGF0YShTVU1NT05FUl8yKS5uYW1lOmZpbmQoIlN1bW1vbmVyRG90IikgdGhlbg0KCQkJaWduaXRlID0gU1VNTU9ORVJfMg0KCQllbmQNCgktLS08DQoJLS0tIENoZWNrcyBhbmQgZmluZHMgSWduaXRlIC0tLQ0KCS0tLSBTbG90cyBmb3IgSXRlbXMgLS0tDQoJLS0tPg0KCQlyc3RTbG90LCBzc1Nsb3QsIHN3U2xvdCwgdndTbG90ID0JCQlHZXRJbnZlbnRvcnlTbG90SXRlbSgyMDQ1KSwNCgkJCQkJCQkJCQkJCQlHZXRJbnZlbnRvcnlTbG90SXRlbSgyMDQ5KSwNCgkJCQkJCQkJCQkJCQlHZXRJbnZlbnRvcnlTbG90SXRlbSgyMDQ0KSwNCgkJCQkJCQkJCQkJCQlHZXRJbnZlbnRvcnlTbG90SXRlbSgyMDQzKQ0KCQlkZmdTbG90LCBoeGdTbG90LCBid2NTbG90LCBicmtTbG90ID0JCUdldEludmVudG9yeVNsb3RJdGVtKDMxMjgpLA0KCQkJCQkJCQkJCQkJCUdldEludmVudG9yeVNsb3RJdGVtKDMxNDYpLA0KCQkJCQkJCQkJCQkJCUdldEludmVudG9yeVNsb3RJdGVtKDMxNDQpLA0KCQkJCQkJCQkJCQkJCUdldEludmVudG9yeVNsb3RJdGVtKDMxNTMpDQoJCWhwU2xvdCwgZnNrU2xvdCA9CQkJCQkJCUdldEludmVudG9yeVNsb3RJdGVtKDIwMDMpLA0KCQkJCQkJCQkJCQkJCUdldEludmVudG9yeVNsb3RJdGVtKDIwNDEpDQoJCXpuYVNsb3QsIHdndFNsb3QsIGJmdFNsb3QsIGxpYW5kcnlzU2xvdCA9CUdldEludmVudG9yeVNsb3RJdGVtKDMxNTcpLA0KCQkJCQkJCQkJCQkJCUdldEludmVudG9yeVNsb3RJdGVtKDMwOTApLA0KCQkJCQkJCQkJCQkJCUdldEludmVudG9yeVNsb3RJdGVtKDMxODgpLA0KCQkJCQkJCQkJCQkJCUdldEludmVudG9yeVNsb3RJdGVtKDMxNTEpDQoJLS0tPA0KCS0tLSBTbG90cyBmb3IgSXRlbXMgLS0tDQoJLS0tIENoZWNrcyBpZiBTcGVsbHMgYXJlIFJlYWR5IC0tLQ0KCS0tLT4NCgkJU2tpbGxRLnJlYWR5ID0gKG15SGVybzpDYW5Vc2VTcGVsbChfUSkgPT0gUkVBRFkpDQoJCVNraWxsVy5yZWFkeSA9IChteUhlcm86Q2FuVXNlU3BlbGwoX1cpID09IFJFQURZKQ0KCQlTa2lsbEUucmVhZHkgPSAobXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSkNCgkJU2tpbGxSLnJlYWR5ID0gKG15SGVybzpDYW5Vc2VTcGVsbChfUikgPT0gUkVBRFkpDQoJCWlSZWFkeSA9IChpZ25pdGUgfj0gbmlsIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoaWduaXRlKSA9PSBSRUFEWSkNCgktLS08DQoJLS0tIENoZWNrcyBpZiBBY3RpdmUgSXRlbXMgYXJlIFJlYWR5IC0tLQ0KCS0tLT4NCgkJZGZnUmVhZHkJCT0gKGRmZ1Nsb3QJCX49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKGRmZ1Nsb3QpCQk9PSBSRUFEWSkNCgkJaHhnUmVhZHkJCT0gKGh4Z1Nsb3QJCX49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKGh4Z1Nsb3QpCQk9PSBSRUFEWSkNCgkJYndjUmVhZHkJCT0gKGJ3Y1Nsb3QJCX49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKGJ3Y1Nsb3QpCQk9PSBSRUFEWSkNCgkJYnJrUmVhZHkJCT0gKGJya1Nsb3QJCX49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKGJya1Nsb3QpCQk9PSBSRUFEWSkNCgkJem5hUmVhZHkJCT0gKHpuYVNsb3QJCX49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKHpuYVNsb3QpCQk9PSBSRUFEWSkNCgkJd2d0UmVhZHkJCT0gKHdndFNsb3QJCX49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKHdndFNsb3QpCQk9PSBSRUFEWSkNCgkJYmZ0UmVhZHkJCT0gKGJmdFNsb3QJCX49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKGJmdFNsb3QpCQk9PSBSRUFEWSkNCgkJbHlhbmRyaXNSZWFkeQk9IChsaWFuZHJ5c1Nsb3Qgfj0gbmlsIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwobGlhbmRyeXNTbG90KSA9PSBSRUFEWSkNCgktLS08DQoJLS0tIENoZWNrcyBpZiBJdGVtcyBhcmUgUmVhZHkgLS0tDQoJLS0tIENoZWNrcyBpZiBIZWFsdGggUG90cyAvIE1hbmEgUG90cyBhcmUgUmVhZHkgLS0tDQoJLS0tPg0KCQlJdGVtcy5IZWFsdGhQb3QucmVhZHkgPSAoaHBTbG90IH49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKGhwU2xvdCkgPT0gUkVBRFkpDQoJCUl0ZW1zLkZsYXNrUG90LnJlYWR5ID0gKGZza1Nsb3Qgfj0gbmlsIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoZnNrU2xvdCkgPT0gUkVBRFkpDQoJLS0tPA0KCS0tLSBDaGVja3MgaWYgSGVhbHRoIFBvdHMgLyBNYW5hIFBvdHMgYXJlIFJlYWR5IC0tLQkNCgktLS0gQ2hlY2tzIGlmIFdhcmRzIGFyZSBSZWFkeSAtLS0NCgktLS0+DQoJCUl0ZW1zLlRyaW5rZXRXYXJkLnJlYWR5CSAgPSAobXlIZXJvOkNhblVzZVNwZWxsKElURU1fNykgPT0gUkVBRFkgYW5kIG15SGVybzpnZXRJdGVtKElURU1fNykuaWQgPT0gMzM0MCkgb3IgKG15SGVybzpDYW5Vc2VTcGVsbChJVEVNXzcpID09IFJFQURZIGFuZCBteUhlcm86Z2V0SXRlbShJVEVNXzcpLmlkID09IDMzNTApIG9yIChteUhlcm86Q2FuVXNlU3BlbGwoSVRFTV83KSA9PSBSRUFEWSBhbmQgbXlIZXJvOmdldEl0ZW0oSVRFTV83KS5pZCA9PSAzMzYxKSBvciAobXlIZXJvOkNhblVzZVNwZWxsKElURU1fNykgPT0gUkVBRFkgYW5kIG15SGVybzpnZXRJdGVtKElURU1fNykuaWQgPT0gMzM2MikNCgkJSXRlbXMuUnVieVNpZ2h0U3RvbmUucmVhZHkgICA9IChyc3RTbG90IH49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKHJzdFNsb3QpID09IFJFQURZKQ0KCQlJdGVtcy5TaWdodFN0b25lLnJlYWR5CSAgID0gKHNzU2xvdCB+PSBuaWwgYW5kIG15SGVybzpDYW5Vc2VTcGVsbChzc1Nsb3QpID09IFJFQURZKQ0KCQlJdGVtcy5TaWdodFdhcmQucmVhZHkJCT0gKHN3U2xvdCB+PSBuaWwgYW5kIG15SGVybzpDYW5Vc2VTcGVsbChzd1Nsb3QpID09IFJFQURZKQ0KCQlJdGVtcy5WaXNpb25XYXJkLnJlYWR5CSAgID0gKHZ3U2xvdCB+PSBuaWwgYW5kIG15SGVybzpDYW5Vc2VTcGVsbCh2d1Nsb3QpID09IFJFQURZKQ0KCS0tLTwNCgktLS0gQ2hlY2tzIGlmIFdhcmRzIGFyZSBSZWFkeSAtLS0NCgktLS0gVXBkYXRlcyBNaW5pb25zIC0tLQ0KCS0tLT4NCgkJZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQoJCWFsbHlNaW5pb25zOnVwZGF0ZSgpDQoJLS0tPA0KCS0tLSBVcGRhdGVzIE1pbmlvbnMgLS0tDQoJLS0tIFNldHRpbmcgQ2FzdCBvZiBVbHQgLS0tDQoJLS0tPg0KCQlpZiBTa2lsbFIuY2FzdGluZ1VsdCBhbmQgbm90IFdhcmRKdW1wS2V5IHRoZW4NCgkJCWtTT1c6RGlzYWJsZUF0dGFja3MoKQ0KCQkJa1NPVy5Nb3ZlID0gZmFsc2UNCg0KCQkJaWYgX0cuQXV0b0NhcnJ5IHRoZW4NCgkJCQlpZiBfRy5BdXRvQ2FycnkuTWFpbk1lbnUgfj0gbmlsIHRoZW4NCgkJCQkJCWlmIF9HLkF1dG9DYXJyeS5DYW5BdHRhY2sgfj0gbmlsIHRoZW4NCgkJCQkJCQlfRy5BdXRvQ2FycnkuQ2FuQXR0YWNrID0gZmFsc2UNCgkJCQkJCQlfRy5BdXRvQ2FycnkuQ2FuTW92ZSA9IGZhbHNlDQoJCQkJCQllbmQNCgkJCQllbHNlaWYgX0cuQXV0b0NhcnJ5LktleXMgfj0gbmlsIHRoZW4NCgkJCQkJaWYgX0cuQXV0b0NhcnJ5Lk15SGVybyB+PSBuaWwgdGhlbg0KCQkJCQkJX0cuQXV0b0NhcnJ5Lk15SGVybzpNb3ZlbWVudEVuYWJsZWQoZmFsc2UpDQoJCQkJCQlfRy5BdXRvQ2FycnkuTXlIZXJvOkF0dGFja3NFbmFibGVkKGZhbHNlKQ0KCQkJCQllbmQNCgkJCQllbmQNCgkJCWVuZA0KCQkJaWYgX0cuTU1BX0xvYWRlZCB0aGVuDQoJCQkJX0cuTU1BX09yYndhbGtlcgk9IGZhbHNlDQoJCQkJX0cuTU1BX0h5YnJpZE1vZGUJPSBmYWxzZQ0KCQkJCV9HLk1NQV9MYW5lQ2xlYXIJPSBmYWxzZQ0KCQkJCV9HLk1NQV9MYXN0SGl0CQk9IGZhbHNlDQoJCQllbmQNCgkJZWxzZWlmIG5vdCBTa2lsbFIuY2FzdGluZ1VsdCB0aGVuDQoJCQlrU09XOkVuYWJsZUF0dGFja3MoKQ0KCQkJa1NPVy5Nb3ZlID0gdHJ1ZQ0KDQoJCQlpZiBfRy5BdXRvQ2FycnkgdGhlbiANCgkJCQlpZiBfRy5BdXRvQ2FycnkuTWFpbk1lbnUgfj0gbmlsIHRoZW4NCgkJCQkJCWlmIF9HLkF1dG9DYXJyeS5DYW5BdHRhY2sgfj0gbmlsIHRoZW4NCgkJCQkJCQlfRy5BdXRvQ2FycnkuQ2FuQXR0YWNrID0gdHJ1ZQ0KCQkJCQkJCV9HLkF1dG9DYXJyeS5DYW5Nb3ZlID0gdHJ1ZQ0KCQkJCQkJZW5kDQoJCQkJZWxzZWlmIF9HLkF1dG9DYXJyeS5LZXlzIH49IG5pbCB0aGVuDQoJCQkJCWlmIF9HLkF1dG9DYXJyeS5NeUhlcm8gfj0gbmlsIHRoZW4NCgkJCQkJCV9HLkF1dG9DYXJyeS5NeUhlcm86TW92ZW1lbnRFbmFibGVkKHRydWUpDQoJCQkJCQlfRy5BdXRvQ2FycnkuTXlIZXJvOkF0dGFja3NFbmFibGVkKHRydWUpDQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCS0tLTwNCgktLS0gU2V0dGluZyBDYXN0IG9mIFVsdCAtLS0NCgktLS0gU2V0dGluZyBQcm9jIFEgTWFyayAtLS0NCgktLS0+DQoJCWlmIEdldFRpY2tDb3VudCgpID49IChTa2lsbFEudGltZVRvSGl0ICsgU2tpbGxRLm1hcmtEZWxheSkgb3IgU2tpbGxRLnJlYWR5ID09IHRydWUgdGhlbg0KCQkJU2tpbGxRLnRpbWVUb0hpdCA9IDANCgkJZW5kDQoJLS0tPA0KCS0tLSBTZXR0aW5nIFByb2MgUSBNYXJrIC0tLQ0KZW5kDQotLSAvIENoZWNrcyBGdW5jdGlvbiAvIC0tDQoNCi0tIC8gaXNMb3cgRnVuY3Rpb24gLyAtLQ0KZnVuY3Rpb24gaXNMb3coTmFtZSkNCgktLS0gQ2hlY2sgWmhvbnlhL1dvb2dsZXRzIEhQIC0tLQ0KCS0tLT4NCgkJaWYgTmFtZSA9PSAnWmhvbnlhJyBvciBOYW1lID09ICdXb29nbGV0cycgdGhlbg0KCQkJaWYgKG15SGVyby5oZWFsdGggKiAoMS9teUhlcm8ubWF4SGVhbHRoKSkgPD0gKEthdGFyaW5hTWVudS5taXNjLlpXSGVhbHRoICogMC4wMSkgdGhlbg0KCQkJCXJldHVybiB0cnVlDQoJCQllbHNlDQoJCQkJcmV0dXJuIGZhbHNlDQoJCQllbmQNCgkJZW5kDQoJLS0tPA0KCS0tLSBDaGVjayBaaG9ueWEvV29vZ2xldHMgSFAgLS0tDQoJLS0tIENoZWNrIFBvdGlvbnMgSFAgLS0tDQoJLS0tPg0KCQlpZiBOYW1lID09ICdIZWFsdGgnIHRoZW4NCgkJCWlmIChteUhlcm8uaGVhbHRoICogKDEvbXlIZXJvLm1heEhlYWx0aCkpIDw9IChLYXRhcmluYU1lbnUubWlzYy5IUEhlYWx0aCAqIDAuMDEpIHRoZW4NCgkJCQlyZXR1cm4gdHJ1ZQ0KCQkJZWxzZQ0KCQkJCXJldHVybiBmYWxzZQ0KCQkJZW5kDQoJCWVuZA0KCS0tLTwNCgktLS0gQ2hlY2sgUG90aW9ucyBIUCAtLS0NCmVuZA0KLS0gLyBpc0xvdyBGdW5jdGlvbiAvIC0tDQoNCi0tIC8gbW92ZVRvQ3Vyc29yIEZ1bmN0aW9uIC8gLS0NCmZ1bmN0aW9uIG1vdmVUb0N1cnNvcigpDQoJaWYgR2V0RGlzdGFuY2UobW91c2VQb3MpIHRoZW4NCgkJbG9jYWwgbW92ZVRvUG9zID0gbXlIZXJvICsgKFZlY3Rvcihtb3VzZVBvcykgLSBteUhlcm8pOm5vcm1hbGl6ZWQoKSozMDANCgkJaWYgbm90IFZJUF9VU0VSIHRoZW4NCgkJCW15SGVybzpNb3ZlVG8obW92ZVRvUG9zLngsIG1vdmVUb1Bvcy56KQ0KCQllbHNlDQoJCQlQYWNrZXQoJ1NfTU9WRScsIHt4ID0gbW92ZVRvUG9zLngsIHkgPSBtb3ZlVG9Qb3Muen0pOnNlbmQoKQ0KCQllbmQNCgllbmQJCQ0KZW5kDQotLSAvIG1vdmVUb0N1cnNvciBGdW5jdGlvbiAvIC0tDQoNCi0tIC8gVGFyZ2V0U2VsZWN0b3JSYW5nZSBGdW5jdGlvbiAvIC0tDQpmdW5jdGlvbiBUYXJnZXRTZWxlY3RvclJhbmdlKCkNCglyZXR1cm4gKFNraWxsUS5yZWFkeSBhbmQgU2tpbGxFLnJlYWR5KSBhbmQgU2tpbGxFLnJhbmdlIG9yIChTa2lsbFEucmVhZHkgYW5kIG5vdCBTa2lsbEUucmVhZHkpIGFuZCBTa2lsbFEucmFuZ2Ugb3IgKG5vdCBTa2lsbFEucmVhZHkgYW5kIFNraWxsRS5yZWFkeSkgYW5kIFNraWxsRS5yYW5nZSBvciBTa2lsbFIucmFuZ2UNCmVuZA0KLS0gLyBUYXJnZXRTZWxlY3RvclJhbmdlIEZ1bmN0aW9uIC8gLS0NCg0KLS0gLyBHZXRUYXJnZXQgRnVuY3Rpb24gLyAtLQ0KZnVuY3Rpb24gR2V0VGFyZ2V0KCkNCglUYXJnZXRTZWxlY3Rvcjp1cGRhdGUoKQ0KICAgIA0KICAgIGlmIF9HLk1NQV9UYXJnZXQgYW5kIF9HLk1NQV9UYXJnZXQudHlwZSA9PSBteUhlcm8udHlwZSB0aGVuIHJldHVybiBfRy5NTUFfVGFyZ2V0IGVuZA0KICAgIGlmIF9HLkF1dG9DYXJyeSBhbmQgX0cuQXV0b0NhcnJ5LkNyb3NzaGFpciBhbmQgX0cuQXV0b0NhcnJ5LkF0dGFja19Dcm9zc2hhaXIgYW5kIF9HLkF1dG9DYXJyeS5BdHRhY2tfQ3Jvc3NoYWlyLnRhcmdldCBhbmQgX0cuQXV0b0NhcnJ5LkF0dGFja19Dcm9zc2hhaXIudGFyZ2V0LnR5cGUgPT0gbXlIZXJvLnR5cGUgdGhlbiByZXR1cm4gX0cuQXV0b0NhcnJ5LkF0dGFja19Dcm9zc2hhaXIudGFyZ2V0IGVuZA0KICAgIA0KICAgIHJldHVybiBUYXJnZXRTZWxlY3Rvci50YXJnZXQNCmVuZA0KLS0gLyBHZXRUYXJnZXQgRnVuY3Rpb24gLyAtLQ0K"), nil, "bt", _ENV))()
